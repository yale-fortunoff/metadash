{"version":3,"sources":["../dist/src/Viz/D3Component/index.js","Common/index.js","Data/resources.js","Data/static.js","Data/getRecordingYear.js","MetaDash/IntroProse/index.js","MetaDash/Gender/index.js","MetaDash/CountListWithBars/index.js","MetaDash/Common/objectToArray.js","MetaDash/Common/arrayToObject.js","MetaDash/Languages/index.js","Viz/Histogram/index.js","Viz/D3Component/index.js","Viz/TreeMap/index.js","Viz/Cluster/index.js","Inputs/ChecklistInput/index.js","Inputs/TextInput/index.js","Inputs/SelectionPool/SelectionPooltem/index.js","Inputs/SelectionPool/index.js","Inputs/TagFilter/TagPool/TagPoolItem/index.js","Inputs/TagFilter/TagPool/index.js","Inputs/TagFilter/index.js","Inputs/RangeSlider/index.js","Inputs/ItemSelector/index.js","Inputs/DoubleSlider/index.js","Inputs/HoverText/index.js","MetaDash/BirthAndRecordingYears/index.js","MetaDash/SubjectHeadings/index.js","MetaDash/Programs/index.js","MetaDash/Interviewers/index.js","MetaDash/BirthPlaces/index.js","FortunoffApp/ResultList/index.js","FortunoffApp/ResultList/ResultListItem/index.js","MetaDash/Results/index.js","MetaDash/index.js","SiteBanner/index.js","App.js","FortunoffApp/fortunize.js","serviceWorker.js","index.js","Data/createReferenceInterface.js","Data/index.js","Data/getGender.js","Data/subjects.js","Data/interviewers.js","Data/programs.js"],"names":["Object","defineProperty","exports","value","default","obj","_react","__webpack_require__","__esModule","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_defineProperty","key","configurable","writable","_defineProperties","target","props","i","length","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","_default","_React$PureComponent","_this","call","instance","Constructor","TypeError","_classCallCheck","this","svg","createRef","initializeChart","bind","updateChart","redrawChart","setMargin","state","currentWidth","margin","top","left","right","bottom","protoProps","staticProps","subClass","superClass","create","_inherits","PureComponent","newMargin","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread","setState","data","_this2","createElement","className","ref","elem","_this3","newWidth","window","document","body","getBoundingClientRect","width","clearTimeout","timeout","setTimeout","unidecode","require","module","normalizeString","term","toLowerCase","trim","replaceKeys","dictObj","keyMap","ret","k","getRecordingYear","getGender","__all","all","filters","itemField","itemFilters","r","item","indexOf","id","subjects","resourceContainsAllItems","interviewers","programs","getResources","options","filterBirthPlaces","birthplaces","place","birth_place_cities","birth_place_countries","j","city","country","split","filterBirthPlacesFactory","resourceContainsAllSubjects","gender","dateRanges","recording","recordingYear","birth","birthYears","birth_years","reduce","curr","next","resourceContainsOnlyPrograms","resourceContainsAllInterviewers","language","query","__webpack_exports__","d","MEN_SUBJECT","WOMEN_SUBJECT","record","recording_dates","a","map","Number","slice","sort","classCallCheck","_super","genderString","assertThisInitialized","yearRangeString","languagesString","programString","birthplaceString","men","women","both","react_default","arr","join","languageCount","summaryData","languages","numeral","format","affiliateCount","yearRange","metaObject","values","x","reverse","birthYearRange","recordingYearRange","recordingYears","items","BIRTH_MIN","BIRTH_MAX","RECORDING_MIN","RECORDING_MAX","React","Component","Men","Women","Both","menRef","bothRef","womenRef","genderToggle","animate","newVal","otherVal","Error","concat","newState","objectSpread","selections","updateSelections","vals","total","label","d3","transition","duration","ease","style","toggleState","onClick","trackScrolling","poolRef","itemCount","increment","scrollBottom","current","scrollTop","height","scrollHeight","addEventListener","removeEventListener","showBars","subtotal","nextItem","count","showAll","allItems","b","itemDict","val","barWidth","handleItemClick","renderBar","objectToArray","arrayToObject","listProps","CountListWithBars_default","html","selectAll","remove","xAxisG","append","classed","yAxisG","barG","node","minYear","maxYear","countRange","xScale","domain","padding","rangeRound","tickSteps","tickValues","xAxis","tickFormat","e","attr","yScale","yAxis","tickSizeOuter","ticks","Math","floor","undefined","ty","t","enter","barClass","bandwidth","update","exit","on","D3Component","h","children","size","treemap","sum","descendants","isHighlighted","itemData","leaves","x0","y0","x1","y1","mouseInCallback","mouseOutCallback","clickCallback","prevProps","prevState","min","arr1","arr2","allItemsMatch","root","parentId","packLayout","allowInteraction","y","onMouseOver","onMouseOut","each","handle","newRadius","currentRadius","random","callback","updateValue","onChange","placeholder","type","handleClick","SelectionPooltem_default","data-value","TagPoolItem_default","searchTerm","updateSearchTerm","addSelection","dropSelectionByID","dropSelection","newSelections","selectionItem","toConsumableArray","dropID","String","filterItems","title","TextInput_default","SelectionPool_default","TagPool_default","handleSelection","clearSelection","selected","buttonClass","defaultValue","ID","optionProps","assign","handles","range","max","labels","scale","valueToX","xToValue","limitValue","limitX","getHandleRange","updateLabels","updateRange","updateTrackHighlight","repositionHandles","handleWidth","invert","round","select","text","xValues","render","innerHTML","bbox","handleHeight","trackHeight","yCenter","handleGroups","raise","yr","getBBox","oldProps","newData","legitArray","get","arrsMatch","hoverText","htext","dropCallback","updateRangeFactory","newDict","itemProps","modeClass","subsetMode","Histogram_default","DoubleSlider_default","lazy","TagFilter_default","setText","handleMouseIn","handleMouseOut","TreeMap_default","HoverText_default","ItemSelector_default","selectionsDict","selectionsWithoutCurrentItem","_this$props$filterIte","_this$props$filterIte2","slicedToArray","allInterviewers","getSuggestions","cleanClusterData","replace","onSuggestionsFetchRequested","_ref","suggestions","onSuggestionsClearRequested","getSuggestionValue","renderSuggestion","onSuggestionSelected","cleanPlaceName","nextProps","nextState","addedCountries","clusterData","allBirthPlaces","birthPlaces","element","newItem","suggestion","event","newValue","_ref2","_ref3","inputProps","Cluster_default","dist_default","idx","WrappedComponent","limit","renderResult","resultsRef","decideToIncrement","result","rel","href","link","_","parentInfo","vheight","distanceFromBottom","results","pageYOffset","innerHeight","offsetHeight","ResultList_default","DEFAULT_FILTERS","birthYear","birthCountry","yearRecorded","fullData","getData","setFilters","clearFilters","updateFilterFactory","pymChild","pym","Child","polling","_data$getData","resources","genderSubjects","s","IntroProse_default","Gender_default","Languages_default","BirthAndRecordingYears_default","yrs","BirthPlaces_default","Interviewers_default","search","retDict","retItem","Programs_default","SubjectHeadings_default","Results_default","YaleLogoImage","YaleLogoSVG","viewBox","version","xmlns","xmlnsXlink","stroke","strokeWidth","fill","fillRule","transform","SiteBanner_YaleLogoImage","FortunoffTitleSVG","fontFamily","fontSize","fontWeight","line-spacing","alt","SiteBanner_YaleLogoSVG","SiteBanner_FortunoffTitleSVG","App","WrappedApp","FortunizedApp","MetaDash","_React$Component","inherits","_class","fortunize_createSuper","createClass","SiteBanner_default","Boolean","location","hostname","match","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister","indexField","__byID","byID","itemContainsAllTerms","terms","birthCities","birthCountries","incr","retKey","_Users_jake_Code_metadash_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","res","cityCount","countryCount","subject_refs","ryear","staticStuff","resource","createReferenceInterface","uri","display_names"],"mappings":"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","file":"static/js/main.68dee54c.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar _default = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(_default, _React$PureComponent);\n\n  function _default(props) {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this, props));\n    _this.svg = _react.default.createRef();\n    _this.initializeChart = _this.initializeChart.bind(_assertThisInitialized(_this));\n    _this.updateChart = _this.updateChart.bind(_assertThisInitialized(_this));\n    _this.redrawChart = _this.redrawChart.bind(_assertThisInitialized(_this));\n    _this.setMargin = _this.setMargin.bind(_assertThisInitialized(_this));\n    _this.state = {\n      currentWidth: -1,\n      margin: props.margin || {\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0\n      }\n    };\n    _this.margin = props.margin || {\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0\n    };\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"setMargin\",\n    value: function setMargin(newMargin) {\n      var margin = _objectSpread({}, this.state.margin, {}, newMargin);\n\n      this.setState({\n        margin: margin\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.updateChart(this.props.data);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initializeChart();\n      this.updateChart();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return _react.default.createElement(\"div\", {\n        className: \"Viz\"\n      }, _react.default.createElement(\"div\", null), _react.default.createElement(\"svg\", {\n        ref: function ref(elem) {\n          _this2.svg = elem;\n        }\n      }));\n    }\n  }, {\n    key: \"redrawChart\",\n    value: function redrawChart() {\n      var _this3 = this; // prevent redraw if the width hasn't changed\n\n\n      var newWidth = window.document.body.getBoundingClientRect().width;\n\n      if (newWidth === this.state.currentWidth) {\n        return;\n      }\n\n      ;\n      this.setState({\n        currentWidth: newWidth\n      }); // only redraw at max once per second\n\n      clearTimeout(this.timeout);\n      this.timeout = setTimeout(function () {\n        _this3.initializeChart();\n\n        _this3.updateChart();\n      }, 1000);\n    } // Override this \n\n  }, {\n    key: \"initializeChart\",\n    value: function initializeChart() {} // Override this\n\n  }, {\n    key: \"updateChart\",\n    value: function updateChart(data) {}\n  }]);\n\n  return _default;\n}(_react.default.PureComponent);\n\nexports.default = _default;","var unidecode = require('unidecode');\n\nfunction normalizeString(term) {\n    return unidecode((term||\"\").toLowerCase().trim());\n}\n\n// replace the keys in a dictionary with something else\nfunction replaceKeys(dictObj, keyMap) {\n    var ret = {}\n    for (var k in dictObj) {\n        ret[keyMap[k]] = dictObj[k];\n    }\n    return ret;\n}\n\nmodule.exports = {\n    normalizeString,\n    replaceKeys,\n}","const { getRecordingYear } = require(\"./getRecordingYear\");\nconst { normalizeString } = require(\"../Common\");\nconst { getGender } = require(\"./getGender\");\n/**\n * all - return an array containing all records.\n *       This can be accomplished by calling .query\n *       without any parameters\n *\n */\nconst __all = require(\"./json/index.10.min.json\");\nconst all = () => __all;\n\nlet filters = {};\n\nfilters.resourceContainsAllItems = (itemField, itemFilters) => {\n  return (r) => {\n    for (let i = 0; i < itemFilters.length; i++) {\n      let item = itemFilters[i];\n      if (r[itemField].indexOf(item.id) < 0) return false;\n    }\n    return true;\n  };\n};\n\nfilters.resourceContainsAllSubjects = (subjects) => {\n  return filters.resourceContainsAllItems(\"subject_refs\", subjects);\n};\n\nfilters.resourceContainsAllInterviewers = (interviewers) => {\n  return filters.resourceContainsAllItems(\"interviewers\", interviewers);\n};\n\nfilters.resourceContainsAllPrograms = (programs) => {\n  return filters.resourceContainsAllItems(\"programs\", programs);\n};\n\nfilters.resourceContainsOnlyPrograms = (programs) => {\n  return (r) => {\n    if (programs.length < 1) {\n      return true;\n    } // don't filter if it's not set\n    if (r.programs.length > 1 || r.programs.length < 1) {\n      return false;\n    }\n    if (r.programs[0] === programs[0].id) {\n      return true;\n    }\n    return false;\n  };\n};\n\n// TODO - eventually, I should just make all of the filters into factories\n//        like this one, so the function is declared once per query\nlet filterBirthPlacesFactory = (options) => {\n  if (\n    !options ||\n    !options.birthplaces ||\n    (options.birthplaces || []).length < 1\n  ) {\n    return () => true;\n  }\n\n  return (r) => {\n    let place = options.birthplaces[0];\n\n    // these two should always match\n    if (\n      (r.birth_place_cities || []).length !==\n      (r.birth_place_countries || []).length\n    ) {\n      return false;\n    }\n\n    for (let j = 0; j < (r.birth_place_cities || []).length; j++) {\n      let city = r.birth_place_cities[j],\n        country = r.birth_place_countries[j];\n      //if (!city || !country ){ return false}\n      if (normalizeString(country) !== normalizeString(place.country))\n        return false;\n\n      if (place.city) {\n        //console.log(\"There's a city to filter\", place)\n        // if there's a city, limit by that as well\n        if (normalizeString(city) !== normalizeString(place.city.split(\",\")[0]))\n          return false;\n      } //else { console.log(\"there's no city required\", city, country, place.city, place.country, place) }\n\n      return true;\n    }\n\n    return false;\n  };\n};\n\nfilters.getResources = (options) => {\n  let filterBirthPlaces = filterBirthPlacesFactory(options);\n  // just skip the iteration if no args are passed\n  if (!options) {\n    return all;\n  }\n\n  // function validRecordingYear(r){\n  //     const yr = getRecordingYear(r);\n  //     if (!options.filters){ return true}\n  //     if (!options.filters.dateRanges){ return true}\n  //     if (!options.filters.dateRanges.recording){ return true}\n  //     if (yr < options.filters.dateRanges[0]){ return false}\n  //     if (yr > options.filters.dateRanges[1]){ return false}\n  //     return true;\n\n  // }\n\n  return (r) => {\n    // filter by selected subject\n    if (!filters.resourceContainsAllSubjects(options.subjects || [])(r)) {\n      return false;\n    }\n\n    // TODO - filter by gender\n    if (\n      (options.gender || []).length > 0 &&\n      (options.gender || []).length < 3\n    ) {\n      if (options.gender.indexOf(getGender(r)) < 0) {\n        return;\n      }\n    }\n\n    // TODO - filter by year of recording\n    if (options.dateRanges && options.dateRanges.recording) {\n      const recordingYear = getRecordingYear(r);\n      if (\n        recordingYear < options.dateRanges.recording[0] ||\n        recordingYear > options.dateRanges.recording[1] ||\n        !recordingYear\n      ) {\n        return false;\n      }\n    } else {\n      // console.log(\"Skipping recording year filter\")\n    }\n\n    // TODO - filter by year of birth\n    if (options.dateRanges && options.dateRanges.birth) {\n      const birthYears = r.birth_years || [];\n      if (birthYears.length < 1) {\n        return false;\n      }\n      if (\n        !birthYears.reduce((curr, next) => {\n          if (!curr) {\n            return false;\n          }\n          if (!options) {\n            return true;\n          }\n          if (!options.dateRanges) {\n            return true;\n          }\n          if (!options.dateRanges.birth) {\n            return true;\n          }\n          if (\n            next < options.dateRanges.birth[0] ||\n            next > options.dateRanges.birth[1]\n          ) {\n            return false;\n          }\n\n          // console.log(\"Birth year filter passed\", curr, next, options.dateRanges.birth)\n\n          return true;\n        }, true)\n      ) {\n        return false;\n      } else {\n        // console.log(\"Birth year filter passed\", r)\n      }\n    } else {\n      // console.log(\"Skipping birth year filter\")\n    }\n\n    if (!filterBirthPlaces(r)) {\n      return false;\n    }\n    // if ((options.birthplaces || []).length > 0) {\n\n    //     let place = options.birthplaces[0];\n\n    //     for (let j = 0; j < (r.birth_place_cities || []).length; j++) {\n\n    //         if ((r.birth_place_cities || []).length !== (r.birth_place_countries || []).length) { return false }\n    //         let city = r.birth_place_cities[j],\n    //             country = r.birth_place_countries[j];\n    //         if (normalizeString(country) !== normalizeString(place.country)) return false;\n    //         if (place.city){\n    //             // if there's a city, limit by that as well\n    //             if (normalizeString(city) !== normalizeString(place.city.split(\",\")[0])) return false;\n    //         }\n    //         console.log(\"match\", place, city, country)\n\n    //     }\n    // }\n\n    // TODO - filter by affiliate program\n    // if (!filters.resourceContainsAllPrograms(options.programs || [])(r)) { return false }\n    if (!filters.resourceContainsOnlyPrograms(options.programs || [])(r)) {\n      return false;\n    }\n\n    // TODO - filter by interviewer\n    if (\n      !filters.resourceContainsAllInterviewers(options.interviewers || [])(r)\n    ) {\n      return false;\n    }\n\n    // TODO - in future, support multiple languages\n    if (\n      options.language &&\n      options.language.length === 1 &&\n      r.language !== options.language[0].id\n    ) {\n      return false;\n    }\n\n    // if it passes everything, return true\n    return true;\n  };\n};\n\n/**\n *\n * query - filter resources based on options object. All options elements\n *         are represented as string arrays. All filters are ANDed together,\n *         so filtering by Men + Women would only (ideally) return testimony\n *         with at least two subjects, a man and a woman.\n *\n * @param {object} options - {\n *                     subjectIDs:Array<String> - ArchivesSpace subject refs to include,\n *                         gender:Array<String> - genders (\"Women\",\"Men\") to include,\n *                  recordingYear:Array<String> - [minYear, maxYear]\n *                      birthYear:Array<String> - [minYear, maxYear]\n *              affiliatePrograms:Array<String> - ArchivesSpace agent refs of programs\n *                   interviewers:Array<String> - ArchivesSpace agent refs of interviewers\n *                      languages:Array<String> - list of languages to include\n *\n * }\n */\n// let query = options => all().filter(filters.getResources(options))\n\nfunction query(options) {\n  if (!options) {\n    return all();\n  }\n  return all().filter(filters.getResources(options));\n}\n\nmodule.exports = { all, query };\n","const MEN_SUBJECT = \"/subjects/35425\",\n    WOMEN_SUBJECT = \"/subjects/25470\";\nexport { MEN_SUBJECT, WOMEN_SUBJECT }","function getRecordingYear(record) {\n    // Returns only the first recording year\n    return (record.recording_dates || [])\n        .filter(a => a)\n        .map(a => Number(a.slice(0, 4)))\n        .sort()[0]\n}\n\n\nexport { getRecordingYear }","import React from 'react';\nimport \"./style/main.scss\";\nimport numeral from \"numeral\";\n\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.genderString = this.genderString.bind(this);\n        this.yearRangeString = this.yearRangeString.bind(this);\n        this.languagesString = this.languagesString.bind(this);\n        this.programString = this.programString.bind(this);\n        this.birthplaceString = this.birthplaceString.bind(this);\n\n    }\n\n    genderString() {\n        if (this.props.filters.gender.length < 1) { return \"men and women\" }\n        const men = this.props.filters.gender.indexOf(\"Men\") >= 0,\n            women = this.props.filters.gender.indexOf(\"Women\") >= 0,\n            both = this.props.filters.gender.indexOf(\"Both\") >= 0;\n\n        let term = \"people\"\n        if (men && women) { term = \"women and men\" }\n        else if (men) { term = \"men\" }\n        else if (women) { term = \"women\" }\n        else if (both) { term = \"women and men testifying together\" }\n\n        return (\n            <span>\n                by <span className=\"stat\">{term}</span>\n            </span>\n        )\n\n    }\n\n    yearRangeString(arr) {\n\n        if (!arr) { return (null) }\n\n\n        if (arr[0] === arr[1]) {\n            return (<span>\n                in <span className=\"stat\">{arr[0]}</span>\n            </span>)\n        }\n\n        return (<span>\n            between <span className=\"stat\">{arr.join(\" and \")}</span>\n        </span>)\n    }\n\n    birthplaceString() {\n        // the data is too inaccurate at this point\n\n        return (null);\n\n\n        // const cityCount = Object.keys(this.props.summaryData.birthCities).length;\n        // const countryCount = Object.keys(this.props.summaryData.birthCountries).length;\n\n        // const cityPart = (\n        //     <span>from <span className=\"stat\">{cityCount} cities</span></span>\n        // );\n\n        // const countryPart = (\n        //     <span>from <span className=\"stat\">{cityCount} countries</span></span>\n        // );\n\n        // if (cityCount > 0 && countryCount > 0){\n        //     return <span>{cityPart} and {countryPart}</span>\n        // }\n    }\n\n    languagesString() {\n        const languageCount = Object.keys(this.props.summaryData.languages).length;\n        return (\n            <span>\n                across <span className=\"stat\">{numeral(languageCount).format(\"0,0\")} {languageCount > 1 ? \"languages\" : \"language\"}</span>\n            </span>\n        )\n    }\n\n    programString() {\n        const affiliateCount = Object.keys(this.props.summaryData.programs).length;\n        return (\n            <span>\n                by <span className=\"stat\">{numeral(affiliateCount).format(\"0,0\")} {affiliateCount > 1 ? \"affilate programs\" : \"affiliate program\"}</span>\n            </span>\n        )\n    }\n\n\n\n    render() {\n\n        // This data dashboard visualizes \n        // {this.propse.items.length} testimonies \n        // by {men/women/men and women}\n        // born in {yearmin, yearmax}\n\n        function yearRange(metaObject){\n\n            const values = Object.keys(metaObject).map(x=>Number(x)).filter(x=>x).sort()\n            const min = values[0]\n            const max = values.reverse()[0]\n           \n\n            return [min, max]\n\n        }\n\n        const birthYearRange = yearRange(this.props.summaryData.birthYears);\n        const recordingYearRange = yearRange(this.props.summaryData.recordingYears);\n\n        return (\n            <div className=\"IntroProse\">\n                This visual search tool includes \n            &nbsp;<span className=\"stat\">{numeral(this.props.items.length).format(\"0,0\")} testimonies</span>\n                &nbsp;{this.genderString()}\n                {/* &nbsp;born {this.yearRangeString(this.props.filters.dateRanges.birth || [this.props.BIRTH_MIN, this.props.BIRTH_MAX])} */}\n                &nbsp;born {this.yearRangeString(birthYearRange || [this.props.BIRTH_MIN, this.props.BIRTH_MAX])}\n                &nbsp;{this.birthplaceString()}\n                {/* &nbsp;who were interviewed {this.yearRangeString(this.props.filters.dateRanges.recording || [this.props.RECORDING_MIN, this.props.RECORDING_MAX])} */}\n                &nbsp;who were interviewed {this.yearRangeString( recordingYearRange || [this.props.RECORDING_MIN, this.props.RECORDING_MAX])}\n                &nbsp;{this.languagesString()}\n                &nbsp;{this.programString()}.\n            </div>\n        );\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\nimport numeral from \"numeral\";\nimport * as d3 from \"d3\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            \"Men\": true,\n            \"Women\": true,\n            \"Both\": true\n        }\n\n        this.menRef = React.createRef();\n        this.bothRef = React.createRef();\n        this.womenRef = React.createRef();\n\n        this.genderToggle = this.genderToggle.bind(this);\n        this.animate = this.animate.bind(this);\n\n    }\n\n    genderToggle(gender) {\n\n        let val = this.state[gender],\n            newVal = !val,\n            // newVal = true,\n            otherVal = false;\n\n    \n        // prevent turning off all genders\n        switch (gender) {\n            case \"Men\":\n                otherVal = this.state.Women || this.state.Both;\n                break;\n            case \"Women\":\n                otherVal = this.state.Men || this.state.Both;\n                break;\n            case \"Both\":\n                otherVal = this.state.Men || this.state.Women;\n                break;\n            default:\n                throw new Error(`Error: Invalid gender ${gender}`)\n\n        }\n\n        if (!otherVal && !newVal) { return }\n\n        const newState = { ...this.state }\n        newState[gender] = newVal;\n        this.setState(newState);\n\n        let selections = [];\n        if (newState.Men) selections.push(\"Men\");\n        if (newState.Women) selections.push(\"Women\");\n        if (newState.Both) selections.push(\"Both\");\n\n        this.props.updateSelections(selections);\n\n    }\n\n    animate() {\n        // animate the width\n\n        const vals = {\n            men: this.props.men || 0,\n            women: this.props.women || 0,\n            both: this.props.both || 0\n        },\n            total = vals.men + vals.women + vals.both;\n\n        const animate = (label, ref) =>\n            d3.select(ref)\n                .transition()\n                .duration(1000)\n                .ease(d3.easeSinOut)\n                .style(\"width\", () => (vals[label] * 100 / total) + \"%\");\n\n        animate(\"both\", this.bothRef)\n        animate(\"men\", this.menRef)\n        animate(\"women\", this.womenRef)\n\n    }\n\n    componentDidMount() { this.animate() }\n    componentDidUpdate() { this.animate() }\n\n    render() {\n        const men = this.props.men || 0,\n            women = this.props.women || 0,\n            both = this.props.both || 0,\n            total = men + both + women;\n\n        const toggleState = label => this.state[label] ? \"on\" : \"off\";\n\n        return (\n            <div className=\"Gender module-box\">\n                <h3 className=\"title\">Gender</h3>\n                <div className=\"label-container\">\n                    <div className=\"big-label\">{numeral(men / total).format(\"0%\")}</div>\n                    <div className=\"big-label\">{numeral(both / total).format(\"0%\")}</div>\n\n                    <div className=\"big-label\">{numeral(women / total).format(\"0%\")}</div>\n\n                    {/* <div className=\"big\">{numeral(men).format(\"0,0\")}</div>\n                    <div className=\"big\">{numeral(women).format(\"0,0\")}</div> */}\n                </div>\n                <div className=\"split-bar-container\">\n                    <div\n                        onClick={() => this.genderToggle(\"Men\")}\n\n                        ref={(elem) => { this.menRef = elem; }}\n                        // style={{ width: `${men * 100 / total}%` }} \n                        className={`men gender-bar ${toggleState(\"Men\")}`}></div>\n                    <div\n                        onClick={() => this.genderToggle(\"Both\")}\n\n                        ref={(elem) => { this.bothRef = elem; }}\n                        // style={{ width: `${women * 100 / total}%` }} \n                        className={`both gender-bar ${toggleState(\"Both\")}`}></div>\n                    <div\n                        onClick={() => this.genderToggle(\"Women\")}\n\n                        ref={(elem) => { this.womenRef = elem; }}\n                        // style={{ width: `${women * 100 / total}%` }} \n                        className={`women gender-bar ${toggleState(\"Women\")}`}></div>\n                </div>\n                <div className=\"label-container\">\n                    <div\n                        className={\"label-area men small-label \" + toggleState(\"Men\")}\n                        onClick={() => this.genderToggle(\"Men\")}\n                    >\n                        {/* <div className={\"toggle-light\"}></div> */}\n                        <div>Men</div>\n                        <div className=\"subtext\">{numeral(men).format(\"0,0\")}</div>\n\n                    </div>\n                    <div\n                        className={\"label-area both small-label \" + toggleState(\"Both\")}\n                        onClick={() => this.genderToggle(\"Both\")}\n                    >\n                        {/* <div className={\"toggle-light\"}></div> */}\n                        <div>Multiple</div>\n                        <div className=\"subtext\">{numeral(both).format(\"0,0\")}</div>\n\n                    </div>\n\n                    <div\n                        onClick={() => this.genderToggle(\"Women\")}\n                        className={\"label-area women small-label \" + toggleState(\"Women\")}\n                    >\n                        {/* <div className={\"toggle-light\"}></div> */}\n                        <div>Women</div>\n                        <div className=\"subtext\">{numeral(women).format(\"0,0\")}</div>\n\n                    </div>\n                </div>\n            </div >\n        );\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\nimport numeral from \"numeral\";\n\nexport default class extends React.Component {\n\n    constructor(props){\n        super(props);\n        this.trackScrolling = this.trackScrolling.bind(this);\n        this.poolRef = React.createRef();\n\n        this.state = {\n            itemCount:100,\n            increment: 10\n        }\n    }\n\n    trackScrolling(){\n\n        // this adds lazy loading in 100-item increments\n        if (this.state.itemCount >= this.props.items){ return }\n\n        const scrollTop = this.poolRef.current.scrollTop,\n              scrollBottom = scrollTop + this.poolRef.current.getBoundingClientRect().height,\n              totalHeight = this.poolRef.current.scrollHeight //getBoundingClientRect().height,\n              //startPct = scrollTop / totalHeight,\n            //   endPct = scrollBottom / totalHeight\n            ;\n\n        // console.log(\"height\",totalHeight, this.poolRef.current.getBoundingClientRect().height)\n\n        // if ((endPct * 100) > 99){\n        if ((totalHeight - scrollBottom) <= 80){\n            // console.log(\"height\", scrollBottom, totalHeight)\n\n            const itemCount = this.state.itemCount + this.state.increment;\n            this.setState({itemCount});\n        }\n\n    }\n\n    componentDidMount() {\n        this.poolRef.current.addEventListener(\"scroll\", this.trackScrolling);\n    }\n\n    componentWillUnmount() {\n        this.poolRef.current.removeEventListener(\"scroll\", this.trackScrolling);\n    }\n\n\n    renderBar(width) {\n        if (!this.props.showBars) { return }\n        return (\n            <div className=\"pct-bar-container\">\n                <div style={{ \"width\": width }} className=\"pct-bar\"></div>\n            </div>\n\n        )\n    }\n\n    render() {\n\n        const total = this.props.items.reduce((subtotal, nextItem) => subtotal + nextItem.count, 0);\n        const width = val => `${val * 100 / total}%`\n\n        const items = this.props.showAll ? this.props.allItems : this.props.items;\n        return (\n            <div \n            ref={this.poolRef}\n            className=\"count-list\">\n                {(items || [])\n                    .sort((a, b) => a.count < b.count ? 1 : -1)\n                    .slice(0,this.state.itemCount)\n                    // .filter(a => a.label && a.label.length > 0)\n                    .map((item, i) => {\n\n                        // skip the filter loop\n                        if (!(item.label && item.label.length > 0)){ return (null)}\n\n                        let itemCount,\n                            barWidth,\n                            className\n\n\n                        if (item.id in this.props.itemDict) {\n                            className = \"list-item\";\n                            itemCount = numeral(this.props.itemDict[item.id].count).format(\"0,0\");\n                            barWidth = width(this.props.itemDict[item.id].count);\n\n                        } else {\n                            className = \"list-item disabled\";\n                            barWidth = 0;\n                            itemCount = \"--\"\n                        }\n\n                        if (item.id in this.props.selections) {\n                            className = \"list-item selected\";\n                        }\n\n\n                        return (\n                            <div onClick={() => (this.props.handleItemClick || (() => { }))(item)} key={i}\n                                className={className}>\n\n                                <div className=\"x-circle-icon\"></div>\n\n                                <div className=\"list-item-name\">\n                                    {item.label}\n                                </div>\n\n                                {this.renderBar(barWidth)}\n\n                                <div className=\"list-item-value\">\n                                    {itemCount}\n                                </div>\n                            </div>\n                        )\n                    })}\n            </div>\n        )\n    }\n}\n","export default function (obj){\n    obj = obj || [];\n    return Object.keys(obj).map(k=>obj[k]);\n}","export default function (arr){\n    let obj = []\n    arr.forEach(item=>obj[item.id] = item)\n    return obj\n}","import React from 'react';\nimport \"./style/main.scss\";\nimport CountListWithBars from \"../CountListWithBars\";\nimport { arrayToObject } from \"../Common\";\n\nexport default class extends React.Component {\n    render() {\n\n        const listProps = {\n            ...this.props,\n            handleItemClick: item => {\n                // switch to item, or clear selections if you click on the selected item \n                if (this.props.selections.length === 0 || item.id !== this.props.selections[0].id) { this.props.updateSelections([item]) }\n                else { this.props.updateSelections([]) }\n            },\n            showAll: true,\n            selections: arrayToObject(this.props.selections),\n            showBars: true\n        };\n\n\n        return (\n            <div className=\"Languages module-box\">\n                <h3 className=\"title\">Languages</h3>\n                <CountListWithBars\n                    {...listProps}\n                ></CountListWithBars>\n            </div>\n\n        )\n\n    }\n\n}","// import React from 'react';\nimport \"./style/main.scss\";\n//import D3Component from \"../../Viz/D3Component\";\nimport D3Component from \"@bit/jakekara.metadash.d3-component\";\nimport numeral from \"numeral\";\nimport * as d3 from \"d3\";\n\nexport default class extends D3Component {\n\n    constructor(props) {\n        super(props);\n\n        this.initializeChart = this.initializeChart.bind(this);\n        this.updateChart = this.updateChart.bind(this);\n        // this.setRange = this.setRange.bind(this);\n    }\n\n    initializeChart() {\n        const svg = d3.select(this.svg).html(\"\");\n        svg.selectAll(\"*\").remove();\n\n        this.xAxisG = svg.append(\"g\")\n            .classed(\"axis\", true)\n            .classed(\"x\", true);\n\n        this.yAxisG = svg.append(\"g\")\n            .classed(\"axis\", true)\n            .classed(\"y\", true);\n\n        this.barG = svg.append(\"g\");\n\n    }\n\n    updateChart(data) {\n\n\n        data = data || this.props.data;\n        const svg = d3.select(this.svg);\n\n        // get width and height\n        const width = svg.node().getBoundingClientRect().width,\n            height = this.props.height || svg.node().getBoundingClientRect().height;\n\n        // svg.attr(\"height\", height + \"px\")\n        // .attr(\"width\", width + \"px\");\n\n        // const yearRange = d3.extent(this.props.data.map(x => x.label))\n        const yearRange = [this.props.minYear, this.props.maxYear]\n        const countRange = [0, d3.max(data.map(x => x.count)) || 1]\n\n        // const margin = this.props.margin || {\n        //     bottom: 30,\n        //     top: 20,\n        //     left: 20,\n        //     right: 20\n        // }\n        const margin = this.state.margin;\n\n        // add axes\n        const xScale = d3.scaleBand()\n            .domain(d3.range(...yearRange))\n            .padding(0.5)\n            .rangeRound([margin.left, width - margin.right])\n\n        const tickSteps = width > 600 ? 10 : 40;\n        const tickValues = d3.range(this.props.minYear, this.props.maxYear, tickSteps);\n\n\n        const xAxis = d3.axisBottom(xScale)\n            .tickFormat(e => numeral(e).format(\"0\"))\n            .tickValues(tickValues)\n\n        this.xAxisG\n            .attr(\"transform\", `translate(${0},${height - margin.bottom})`)\n            .call(xAxis)\n\n        const yScale = d3.scaleLinear()\n            .domain(countRange)\n            .rangeRound([height - margin.bottom, margin.top])\n        \n        const yAxis = d3.axisLeft(yScale).tickSizeOuter(0)\n            // .tickSize(width - margin.left - margin.right)\n            .ticks(height / 20)\n            .tickFormat(e => Math.floor(e) === e ? e : undefined);\n\n        const ty = d3.transition().duration(1000).ease(d3.easeQuadIn);\n\n        this.yAxisG\n            .attr(\"transform\", `translate(${margin.left},${0})`)\n            .transition(ty)\n            .call(yAxis)\n\n        const t = i => svg.transition()\n            .duration(1000)\n            .ease(d3.easeCubic)\n\n        this.barG.selectAll(\".bar\")\n            .data(data)\n            .join(\n                (enter, i) => enter.append(\"rect\")\n                    .attr(\"class\", d => d.barClass)\n                    .classed(\"bar\", true)\n                    .attr(\"data-enter-value\", d => d.count)\n                    .attr(\"data-label\", d => d.label)\n                    .attr(\"y\", d => yScale(0))\n                    .attr(\"width\", xScale.bandwidth)\n                    .attr(\"x\", d => xScale(d.label))\n                    .call(enter => enter.transition(null)\n                        .attr(\"y\", d => yScale(d.count || 0))\n                        .attr(\"height\", d => yScale(0) - yScale(d.count || 0))\n                        .attr(\"width\", xScale.bandwidth)\n                    ),\n                update => update\n                    .attr(\"data-update-value\", d => d.count)\n                    .attr(\"class\", d => d.barClass)\n                    .classed(\"bar\", true)\n                    .attr(\"x\", d => xScale(d.label))\n                    .call(update => update.transition(t(1000))\n                        .attr(\"y\", d => yScale(d.count || 0))\n                        .attr(\"height\", d => yScale(0) - yScale(d.count || 0))\n                    ),\n                exit => exit\n                    .attr(\"data-exit-value\", d => d.count)\n                    // .attr(\"class\",d=>d.barClass)\n                    .attr(\"x\", d => xScale(d.label))\n                    .call(exit => exit.transition(t(100))\n                        .attr(\"height\", 0)\n                        .attr(\"y\", () => yScale(0))\n                    )\n            )\n\n        d3.select(window).on(\"resize.histogram\", this.redrawChart.bind(this))\n\n        // d3.select(window).on(\"resize\", this.redrawChart)\n    }\n\n}","import React from 'react';\n\nexport default class extends React.PureComponent {\n\n    constructor(props) {\n        super(props);\n\n        this.svg = React.createRef();\n        this.initializeChart = this.initializeChart.bind(this);\n        this.updateChart = this.updateChart.bind(this);\n        this.redrawChart = this.redrawChart.bind(this);\n        this.setMargin = this.setMargin.bind(this);\n\n        this.state = {\n            currentWidth: -1,\n            margin: props.margin || {\n                top:0,\n                left:0,\n                right:0,\n                bottom:0\n            }\n        }\n\n        this.margin = props.margin || {\n            top:0,\n            left:0,\n            right:0,\n            bottom:0\n        }\n\n    }\n\n    setMargin(newMargin){\n        const margin = {...this.state.margin, ...newMargin};\n        this.setState({ margin });\n\n    }\n\n    componentDidUpdate() { \n        this.updateChart(this.props.data);\n    }\n\n    componentDidMount() {\n        this.initializeChart();\n        this.updateChart();\n\n    }\n\n    render() {\n        return <div className=\"Viz\">\n            <div></div>\n            <svg ref={(elem) => { this.svg = elem; }}></svg>\n        </div>;\n    }\n\n    redrawChart(){\n\n        // prevent redraw if the width hasn't changed\n        const newWidth = window.document.body.getBoundingClientRect().width;\n        if (newWidth === this.state.currentWidth){ return };\n\n        this.setState({currentWidth:newWidth});\n\n        // only redraw at max once per second\n        clearTimeout(this.timeout);\n        this.timeout = setTimeout(()=>{\n            this.initializeChart();\n            this.updateChart();\n    \n        }, 1000)\n    }\n\n    // Override this \n    initializeChart() {\n    }\n\n    // Override this\n    updateChart(data) {\n    }\n\n}","// import React from 'react';\nimport \"./style/main.scss\";\nimport D3Component from \"../D3Component\";\nimport * as d3 from \"d3\";\n\nexport default class extends D3Component {\n\n    constructor(props) {\n        super(props);\n\n        this.initializeChart = this.initializeChart.bind(this);\n        this.updateChart = this.updateChart.bind(this);\n    }\n\n    initializeChart() {\n        const svg = d3.select(this.svg).html(\"\");\n        svg.selectAll(\"*\").remove();\n\n        const //width = svg.node().getBoundingClientRect().width,\n            height = this.props.height || svg.node().getBoundingClientRect().height;\n\n        svg.attr(\"height\", height);\n\n        // svg.on(\"resize\", this.redrawChart)\n\n    }\n\n    updateChart() {\n        const svg = d3.select(this.svg);\n\n        const width = svg.node().getBoundingClientRect().width,\n            height = this.props.height || svg.node().getBoundingClientRect().height;\n\n        svg.attr(\"height\", height)\n        const h = d3.hierarchy({ \"children\": this.props.items });\n\n        var treemap = d3.treemap()\n            .size([width, height])\n            .padding(2);\n\n        treemap(h\n            .sum(function (d) { return d.count; })\n            .sort(function (a, b) { return a.height - b.height || b.count - a.count; })\n        ).descendants();\n\n        // function color() { return \"gray\" }\n\n        const isHighlighted = item => {\n            const itemData = item.data;\n            if (!this.props.selections || this.props.selections.length < 1) { return false }\n            if (itemData.id === this.props.selections[0].id) { return true };\n            return false\n        }\n        const t = svg.transition()\n            .duration(500)\n            .ease(d3.easeQuad)\n\n        svg.selectAll(\"rect\")\n            .data(h.leaves())\n            .join(\n                enter => enter\n                    .append(\"rect\")\n                    .classed(\"program\", true)\n                    .classed(\"highlighted\", isHighlighted)\n                    .attr(\"id\", function (d) { return d.id; })\n                    .call(enter => enter\n                        .attr(\"x\", d => d.x0)\n                        .attr(\"y\", d => d.y0)\n                        .attr(\"width\", function (d) { return d.x1 - d.x0; })\n                        .attr(\"height\", function (d) { return d.y1 - d.y0; })\n                    )\n                // .on(\"click\", d => {\n                //     if (d.data.id in this.props.itemDict) {\n                //         return this.props.clickCallback(d)\n                //     }\n                // })\n                ,\n                update => update\n                    .classed(\"highlighted\", isHighlighted)\n                    .attr(\"id\", function (d) { return d.id; })\n\n                    .call(update => update.transition(t)\n                        .attr(\"x\", d => d.x0)\n                        .attr(\"y\", d => d.y0)\n                        .attr(\"width\", function (d) { return d.x1 - d.x0; })\n                        .attr(\"height\", function (d) { return d.y1 - d.y0; })\n                    ),\n                exit => exit.remove()\n            )\n            // .on(\"click\", d => {\n            //     if (d.data.id in this.props.itemDict) {\n            //         return this.props.clickCallback(d.data)\n            //     }\n            // })\n\n        svg.selectAll(\"rect\")\n            .on(\"mouseover\", item => this.props.mouseInCallback (item.data))\n            .on(\"mouseout\", item => this.props.mouseOutCallback (item.data))\n            .on(\"click\", item => this.props.clickCallback(item.data));\n\n\n        d3.select(window).on(\"resize.treemap\", this.redrawChart.bind(this))\n\n\n    }\n\n    // initializeChartOld() {\n    //     const svg = d3.select(this.svg).html(\"\");\n\n    //     const width = svg.node().getBoundingClientRect().width,\n    //         height = this.props.height || svg.node().getBoundingClientRect().height;\n\n    //     svg.attr(\"height\", height)\n    //     const h = d3.hierarchy({ \"children\": this.props.items });\n\n    //     var treemap = d3.treemap()\n    //         .size([width, height])\n    //         .padding(2);\n\n    //     var nodes = treemap(h\n    //         .sum(function (d) { return d.count; })\n    //         .sort(function (a, b) { return a.height - b.height || b.count - a.count; })\n    //     )\n    //         .descendants();\n\n\n    //     const isHighlighted = item => {\n    //         const itemData = item.data;\n    //         if (!this.props.selections || this.props.selections.length < 1) { return false }\n    //         if (itemData.id === this.props.selections[0].id) { return true };\n    //         return false\n    //     }\n    //     const t = svg.transition()\n    //         .duration(1000)\n    //         .ease(d3.easeCubic)\n\n    //     var cell = svg.selectAll(\"rect.program\")\n    //         .data(h.leaves())\n    //         .join(\n    //             enter => enter\n    //                 .append(\"rect\")\n    //                 .classed(\"highlighted\", isHighlighted)\n    //                 .attr(\"id\", function (d) { return d.id; })\n    //                 .attr(\"x\", d => d.x0)\n    //                 .attr(\"y\", d => d.y0)\n    //                 .attr(\"width\", function (d) { return d.x1 - d.x0; })\n    //                 .attr(\"height\", function (d) { return d.y1 - d.y0; }),\n    //         )\n\n\n\n\n    //     svg.selectAll(\"rect\")\n    //         .on(\"mouseover\", this.props.mouseInCallback || (() => { console.log(\"Default handler\") }))\n    //         .on(\"mouseout\", this.props.mouseOutCallback || (() => { }))\n    //         .on(\"click\", item => {\n    //             console.log(\"initial click\");\n    //             return this.props.clickCallback(item)\n    //         });\n\n\n    //     d3.select(window).on(\"resize\", this.redrawChart)\n\n\n    // }\n\n    // updateChartOld() {\n\n    //     const svg = d3.select(this.svg);\n\n    //     svg.selectAll(\"rect\")\n    //         .classed(\"highlighted\", d => {\n    //             return d.data.id in this.props.itemDict\n    //         })\n    //         .on(\"click\", d => {\n    //             console.log(\"update click\")\n    //             if (d.data.id in this.props.itemDict) {\n    //                 return this.props.clickCallback(d)\n    //             }\n    //         })\n\n    // }\n\n}","import \"./style/main.scss\";\nimport D3Component from \"../D3Component\";\n// import numeral from \"numeral\";\nimport * as d3 from \"d3\";\n// import { objectToArray } from '../../MetaDash/Common';\n\nexport default class extends D3Component {\n\n    constructor(props) {\n        super(props);\n\n        this.initializeChart = this.initializeChart.bind(this);\n        this.updateChart = this.updateChart.bind(this);\n    }\n\n    initializeChart() {\n        const svg = d3.select(this.svg).html(\"\");\n\n        const //width = svg.node().getBoundingClientRect().width,\n            height = this.props.height || svg.node().getBoundingClientRect().height;\n\n        svg.attr(\"height\", height + \"px\");\n        // svg.attr(\"width\", width + \"px\");\n\n        // svg.on(\"resize\", ()=>super.redrawChart.call(this));\n\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        this.updateChart(prevProps, prevState);\n    }\n\n    updateChart(prevProps, prevState) {\n\n        const svg = d3.select(this.svg)\n\n        const width = svg.node().getBoundingClientRect().width,\n            height = Math.min(width,\n                this.props.height || svg.node().getBoundingClientRect().height\n            );\n\n        svg.attr(\"height\", height + \"px\");\n\n\n        const items = this.props.items;\n        // change this to props.allItems if you want to preserve each node's circle element\n        // which is cooler, but expensive\n        // let allItems = this.props.items;\n\n        //--------------HACK--------------\n        // TODO - Fix this q-a-d hack to prevent redrawing if the data have not changed\n        //        Get rid of this whole block....\n        function allItemsMatch(arr1, arr2) {\n            if (arr1.length !== arr2.length) { return false }\n            for (let i = 0; i < arr1.length; i++) {\n                if (arr1[i].id !== arr2[i].id) { return false }\n                if (arr1[i].count !== arr2[i].count) { return false }\n            }\n            return true;\n        }\n\n        if (allItemsMatch(\n\n            // this works, but do I really have to loop this each time?\n            // objectToArray((prevProps || {}).itemDict || {}),\n            // objectToArray(this.props.itemDict)\n\n            // this seems to be working just as well without the two loops\n            (prevProps || { items: [] }).items,\n            this.props.items\n        )) {\n            // console.log(\"redraw prevented\")\n\n            // objectToArray(this.props.itemDict))) {\n            return\n        }\n        // ... down to here.\n        //----------END OF HACK-----------\n\n        const root = d3.stratify()\n            .id(d => d.label.split(\"|\")[0])\n            .parentId(d => d.label.split(\"|\")[1])(items);\n\n        var packLayout = d3.pack()\n            .padding(0.725)\n            .size([width, height]);\n\n        root.sum(d => Number(d.count ? d.count : 0));\n\n        const data = root.descendants()\n            // .filter(d => d.data.label.indexOf(\"root\") < 0)\n            .filter(d => d.data.label.indexOf(\"|country\") < 0)\n            .filter(d => d.data.label.indexOf(\"country|\") < 0)\n\n\n\n        packLayout(root);\n        svg.selectAll(\"circle.city\")//.transition();\n\n        // const t = d3.transition().duration(1100);\n        this.allowInteraction = data.length;\n\n        // let nodes = \n\n        // function realChange(newRadius, oldRadius) {\n        //     return (newRadius > 0) && (oldRadius > 0);\n        // };\n\n        const r = d => d.r || 0;\n        const x = d => d.x || 0;\n        const y = d => d.y || 0;\n\n        svg\n            .selectAll('circle.city')\n            .data(data)\n            .join(\n                enter => enter\n                    .append('circle')\n                    // .classed(\"city\", d => d.data.label.indexOf(\"|country\") < 0)\n                    // .classed(\"country\", d => d.data.label.indexOf(\",\") === 0)\n        \n                    .classed(\"city\", true)\n                    .on(\"mouseover\", d => this.props.onMouseOver(d.data))\n                    .on(\"mouseout\", d => this.props.onMouseOut(d.data))\n                    .on(\"click\", d => {\n                        if (this.props.selections\n                            && this.props.selections.length === 1\n                            && this.props.selections[0].id === d.data.id) {\n                            this.props.updateSelections([])\n                        } else {\n                            this.props.updateSelections([d.data])\n                        }\n                    })\n                    .attr('cx', x)\n                    .attr('cy', y)\n                    .attr('r', r),\n                update => update\n                    .attr(\"data-city\", d => d.data.label)\n                    .each(function (d, i) {\n\n                        let handle = d3.select(this).style(\"opacity\", \"0.5\");\n                        const newRadius = r(d);\n                        const currentRadius = d3.select(this).attr(\"r\") || 0;\n\n                        if (newRadius > 0 && currentRadius > 0 && currentRadius !== newRadius) {\n                            // console.log(\"Animating\")\n                            handle = handle.transition().duration(1000 * Math.random());\n                        } else {\n                            //console.log(\"Skipping animation\")\n                        }\n\n                        handle\n                            .style(\"opacity\", \"1\")\n                            .attr('cx', x)\n                            .attr('cy', y)\n                            .attr('r', r);\n\n                    }),\n                // .call(update => {\n                //     update\n                //     .transition(t)\n                //         .transition(function (d) {\n                //             console.log(\"Should I transition?\",d)\n                //             // only transition if \n                //             if (r(d) <= 0) { return null }\n                //             return realChange(r(d), d3.select(this).attr(\"r\") || 0) ? t: null\n                //         })\n                //         .attr('cx', x)\n                //         .attr('cy', y)\n                //         .attr('r', r);\n\n\n                // }),\n                exit => exit.remove()\n                // exit=>exit\n                // .call(exit=>\n                //     exit.transition().duration(1000)\n                //     .attr('r', 0)\n                // )\n            )\n\n        d3.select(window).on(\"resize.cluster\", this.redrawChart.bind(this))\n\n\n    }\n\n\n    newMethod(handle, t) {\n        handle = handle.transition(t);\n        return handle;\n    }\n}","import React from 'react';\n// import CheckboxInput from \"../CheckboxInput\";\n// import GenericInput from \"../GenericInput\";\n\nimport Autosuggest from 'react-autosuggest';\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            value: '',\n            // items: props.items,\n            suggestions: [],\n            selections:[]\n        }\n\n        // react-autosuggest functions\n        this.getSuggestions = this.getSuggestions.bind(this);\n        this.getSuggestionValue = this.getSuggestionValue.bind(this);\n        this.renderSuggestion = this.renderSuggestion.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.onSuggestionsClearRequested = this.onSuggestionsClearRequested.bind(this);\n        this.onSuggestionsFetchRequested = this.onSuggestionsFetchRequested.bind(this);\n        this.renderSectionTitle = this.renderSectionTitle.bind(this);\n    }\n\n    // Teach Autosuggest how to calculate suggestions for any given input value.\n    getSuggestions(value) {\n        const inputValue = value.trim().toLowerCase();\n        const inputLength = inputValue.length;\n\n        const ret = inputLength === 0 ? [] : this.props.items.filter(item =>{\n            return item.label.toLowerCase().slice(0, inputLength) === inputValue\n\n        });\n        return ret;\n    };\n\n    getSuggestionValue(suggestion) {\n        return suggestion.value;\n    }\n\n    renderSuggestion(suggestion) {\n        return (\n            <div>\n                {suggestion.label}\n            </div>\n        );\n    }\n\n    onChange = (event, { newValue , method}) => {\n\n        var selections = this.state.selections.slice();\n        if (method === \"click\" || method === \"enter\") { selections.push(newValue)}\n\n        this.setState({\n            value: newValue,\n            selections: selections\n        });\n    };\n\n    // Autosuggest will call this function every time you need to update suggestions.\n    // You already implemented this logic above, so just use it.\n    onSuggestionsFetchRequested = ({ value }) => {\n        this.setState({\n            suggestions: this.getSuggestions(value)\n        });\n    };\n\n    // Autosuggest will call this function every time you need to clear suggestions.\n    onSuggestionsClearRequested = () => {\n        this.setState({\n            suggestions: []\n        });\n    };\n    \n    renderSectionTitle(_) {\n        return (null);\n    }\n\n    render() {\n        const { suggestions, value } = this.state;\n        const inputProps = {\n            placeholder: 'Begin typing',\n            value,\n            onChange: this.onChange,\n        };\n        return (\n            <div>\n                <div>\n                    {this.state.selections.map(item=>{\n                        return (<div>{item}</div>)\n                    })}\n                </div>\n                <Autosuggest\n                    suggestions={suggestions}\n                    onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n                    onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n                    getSuggestionValue={this.getSuggestionValue}\n                    renderSuggestion={this.renderSuggestion}\n                    inputProps={inputProps}\n                />\n            </div>\n        );\n    }\n\n}\n","import React from 'react';\n// import GenericInput from \"../GenericInput\";\nimport \"./style/main.scss\";\n\nexport default class extends React.Component{\n\n    constructor(props) {\n        super(props);\n\n        this.callback = this.props.callback || function () { };\n\n        this.updateValue = this.updateValue.bind(this);\n    }\n\n    updateValue(e) {\n        this.callback(e.target.value);\n    }\n\n    render() {\n        const value = this.props.value || \"\";\n        return (\n            <div className=\"TextInput\">\n                <input \n                onChange={this.updateValue} \n                value={value} \n                placeholder={this.props.placeholder} \n                type=\"text\"></input>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick() {\n        this.props.callback(this.props.item);\n    }\n\n    render() {\n        return (\n            <div onClick={this.handleClick} className=\"SelectionPoolItem\">\n                <div>{this.props.item.label}</div> <div className=\"button\"></div>\n            </div>\n        )\n    }\n}","import React from 'react';\nimport SelectionPoolItem from \"./SelectionPooltem\";\nimport \"./style/main.scss\";\n\nexport default class extends React.Component {\n\n    render() {\n        return (\n            <div className=\"SelectionPool\">\n                {(this.props.items || []).map((item,i) => {\n                    return (<SelectionPoolItem key={i} callback={this.props.callback} item={item}></SelectionPoolItem>);\n                })}\n            </div>\n            )\n        }\n}","import React from 'react'\nimport \"./style/main.scss\"\n\nexport default class extends React.Component {\n\n    constructor(props){\n        super(props);\n\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick(){\n        this.props.callback(this.props.item);\n    }\n\n    render(){\n        return (\n            <div onClick={this.handleClick} data-value={this.props.item.value} className=\"TagItem\">{this.props.item.label}</div>\n        )\n    }\n\n}","import React from 'react';\nimport TagPoolItem from \"./TagPoolItem\";\nimport \"./style/main.scss\"\n\nexport default class extends React.Component{\n\n    constructor(props){\n        super(props);\n        this.trackScrolling = this.trackScrolling.bind(this);\n        this.poolRef = React.createRef();\n\n        this.state = {\n            itemCount:100,\n            increment: 50\n        }\n    }\n\n    trackScrolling(){\n\n        // this adds lazy loading in 100-item increments\n        if (this.state.itemCount >= this.props.items){ return }\n\n        const scrollTop = this.poolRef.current.scrollTop,\n              scrollBottom = scrollTop + this.poolRef.current.getBoundingClientRect().height,\n              totalHeight = this.poolRef.current.getBoundingClientRect().height,\n            //   startPct = scrollTop / totalHeight,\n              endPct = scrollBottom / totalHeight;\n\n        if (endPct * 100 > 80){\n            const itemCount = this.state.itemCount + this.state.increment;\n            this.setState({itemCount});\n        }\n\n    }\n\n    componentDidMount() {\n        this.poolRef.current.addEventListener(\"scroll\", this.trackScrolling);\n    }\n\n    componentWillUnmount() {\n        this.poolRef.current.removeEventListener(\"scroll\", this.trackScrolling);\n    }\n\n\n    render(){\n        return (\n            <div \n            ref={this.poolRef}\n            className=\"TagPool\">\n                {(this.props.items.slice(0, this.state.itemCount) || []).map((item, i)=>{\n                    return (\n                    <TagPoolItem \n                    callback={this.props.callback || function(){}} \n                    key={i} \n                    item={item}></TagPoolItem>\n                    )\n                })}\n            </div>\n        )\n    }\n}","import React from 'react';\n// import GenericInput from \"../GenericInput\";\nimport TextInput from \"../TextInput\";\n\nimport SelectionPool from \"../SelectionPool\";\nimport TagPool from \"./TagPool\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            searchTerm: '',\n        }\n\n        this.updateSearchTerm = this.updateSearchTerm.bind(this);\n        this.addSelection = this.addSelection.bind(this);\n        this.dropSelectionByID = this.dropSelectionByID.bind(this);\n        this.dropSelection = this.dropSelection.bind(this);\n        this.updateSelections = this.updateSelections.bind(this);\n    }\n\n    updateSelections(newSelections) {\n        this.props.updateSelections(newSelections);\n        this.setState({ searchTerm: \"\" })\n    }\n\n    updateSearchTerm(t) {\n        this.setState({\n            searchTerm: t,\n        });\n    }\n\n    addSelection(selectionItem) {\n        // don't add a duplicate\n        var newSelections = [...this.props.selections];\n        if (newSelections.filter(a => a.id === selectionItem.id).length > 0) { return; }\n\n        newSelections = [...newSelections, selectionItem];\n\n        this.updateSelections(newSelections, this.state.searchTerm);\n    }\n\n    dropSelectionByID(dropID) {\n        var newSelections = [...this.props.selections];\n        newSelections = newSelections.filter(a => {\n            const ret = String(a.id) !== String(dropID);\n            return ret;\n        });\n\n        this.updateSelections(newSelections, this.state.searchTerm);\n    }\n\n    dropSelection(item) {\n        this.dropSelectionByID(item.id)\n    }\n\n    render() {\n        // return (null);\n\n        //const items = this.props.getItems(this.props.selections, this.state.searchTerm.split(\"\"))\n        const items = this.props.filterItems(this.state.searchTerm.split(\" \"))\n            .filter(i => i.id in this.props.allItems)\n\n\n        return (\n            <div className=\"TagFilter\">\n                <div className=\"top-area\">\n\n                    <div className=\"type-area\">\n                        <div className=\"title-area\">{this.props.title}</div>\n                        <TextInput\n                            callback={this.updateSearchTerm}\n                            placeholder={this.props.placeholder}\n                            value={this.state.searchTerm}\n                        ></TextInput>\n\n                    </div>\n                    <SelectionPool\n                        callback={this.dropSelection}\n                        items={this.props.selections}\n                    ></SelectionPool>\n                </div>\n\n                <TagPool\n                    callback={this.addSelection}\n                    items={items || []}\n                // items={this.state.poolItems || []}\n                ></TagPool>\n            </div>\n        )\n    }\n\n}","import React from 'react';\n// import \"./style/main.scss\";\n\nexport default class extends React.Component {\n\n    componentDidMount(){\n    }\n\n    render(){ return (\n        <div className=\"RangeSlider\">\n        </div>\n    )}\n}","import React from 'react';\nimport \"./style/main.scss\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.handleSelection = this.handleSelection.bind(this);\n        this.clearSelection = this.clearSelection.bind(this);\n    }\n\n    handleSelection(item) {\n        this.props.updateSelections(this.props.items.filter(i => i.id === item.target.value))\n    }\n\n    clearSelection() {\n        this.props.updateSelections([])\n    }\n\n    render() {\n\n        const selected = this.props.selections && this.props.selections.length === 1 ? this.props.selections[0] : { id: \"ALL\" };\n        // const clearButtonText = selected.id === \"ALL\" ? \"\" : \"╳\"\n        const subClass = selected.id === \"ALL\" ? \"arrow\" : \"x\"\n        // const active = selected.id !== \"ALL\"\n        let buttonClass = \"clear-button\";\n        buttonClass = \"dropdown-icon \" + subClass;\n\n        if (selected.id !== \"ALL\") { buttonClass += \" enabled\" }\n        return (\n            <div className=\"ItemSelector\">\n\n                <select\n                    className={subClass + \" dropdown-icon\"}\n                    defaultValue={selected.ID}\n                    onChange={this.handleSelection}>\n                    <option\n                        onClick={this.clearSelection}\n                        value=\"all\"\n                    >{this.props.placeholder || \"All items\"}</option>\n\n                    {this.props.items.map((item, i) => {\n                        const optionProps = {\n                            // selected: selected.id === item.id,\n                            value: item.id\n                        }\n                        return (\n                            <option\n                                key={i}\n                                {...optionProps}>{item.label}</option>\n                        )\n                    })}\n                </select>\n\n                <div className={\"button \" + buttonClass} onClick={this.clearSelection}>\n                </div>\n\n            </div>\n        );\n    }\n\n}\n","import React from 'react';\n//import D3Component from \"../../Viz/D3Component\"\nimport D3Component from \"@bit/jakekara.metadash.d3-component\";\nimport \"./style/main.scss\";\nimport * as d3 from \"d3\";\n\nexport default class extends D3Component {\n\n    constructor(props) {\n        super(props);\n\n        // this.state = {\n        //     handles: [],\n        //     range: [{ value: props.min }, { value: props.max }],\n        //     labels: [{ value: props.min }, { value: props.max }]\n        // }\n        this.state ={\n            margin: props.margin || {\n                top:0,\n                left:0,\n                right:0,\n                bottom:0\n            },\n            handles: [],\n            range: [{ value: props.min }, { value: props.max }],\n            labels: [{ value: props.min }, { value: props.max }]\n        };\n\n        this.scale = this.scale.bind(this);\n        this.valueToX = this.valueToX.bind(this);\n        this.xToValue = this.xToValue.bind(this);\n        this.limitValue = this.limitValue.bind(this);\n        this.limitX = this.limitX.bind(this);\n        this.getHandleRange = this.getHandleRange.bind(this);\n        this.updateLabels = this.updateLabels.bind(this);\n        this.updateRange = this.updateRange.bind(this);\n        this.updateTrackHighlight = this.updateTrackHighlight.bind(this);\n\n        this.repositionHandles = this.repositionHandles.bind(this);\n\n    }\n\n    scale() {\n        return d3.scaleLinear()\n            .domain([this.props.min, this.props.max])\n            // .range([this.margin.left, this.width - this.margin.right]);\n            .range([this.state.margin.left, this.width - this.state.margin.right]);\n\n    }\n\n    valueToX(val) {\n        return this.scale()(val) - this.handleWidth / 2;\n    }\n\n    xToValue(x) {\n        return this.scale().invert(x + this.handleWidth / 2);\n    }\n\n    limitValue(value) {\n        return Math.max(this.props.min, Math.min(this.props.max, value));\n    }\n\n    limitX(x) {\n        return this.valueToX(this.limitValue(Math.round(this.xToValue(x))));\n    }\n\n    getHandleRange() {\n        let range = [];\n        d3.select(this.svg)\n            .select(\".handle-layer\")\n            .selectAll(\"image.handle-icon\")\n            .each(d => range.push(d))\n\n        range = range.sort((a, b) => { return a.value < b.value ? -1 : 1 })\n        return range;\n    }\n\n    updateLabels() {\n        // this.setState({ labels: this.getHandleRange() });\n        const handles = d3.select(this.svg).select(\".handle-layer\").selectAll(\".handle\");\n\n        handles.each(function (d) {\n            d3.select(this).select(\"text\").text(d.value)\n        })\n\n    }\n\n    updateRange() {\n        let range = this.getHandleRange();\n        this.props.updateSelections(range.map(x => x.value))\n        // this.setState({ range })\n    }\n\n    updateTrackHighlight() {\n\n        let xValues = [];\n\n        d3.select(this.svg).selectAll(\".handle\")\n            .each(function () {\n                // console.log(\"Double slider handle iter\", this)\n                xValues.push(Number(d3.select(this).attr(\"x\")));\n            });\n\n        d3.select(this.svg).select(\".highlight\")\n            .attr(\"x\", d3.min(xValues) + this.handleWidth / 2)\n            .attr(\"width\", d3.max(xValues) - d3.min(xValues))\n\n    }\n\n    updateChart() { }\n\n    initializeChart() {\n\n        this.render();\n\n        let svg = d3.select(this.svg)\n        svg.selectAll(\"*\").remove();\n        svg.html(\"\")\n\n        try {\n            this.svg.current.innerHTML = \"\";\n        } catch (e) { }\n\n        svg = d3.select(this.svg)\n\n        const\n            bbox = svg.node().getBoundingClientRect(),\n            width = bbox.width,\n            height = bbox.height,\n            handleHeight = this.props.handleHeight || 17.151,\n            handleWidth = this.props.handleWidth || 13,\n            trackHeight = this.props.trackHeight || 6;\n\n        let yCenter = this.state.margin.top + (height - this.state.margin.bottom) / 2;\n\n        this.width = width;\n        this.height = height;\n        this.handleWidth = handleWidth;\n        // this.yCenter = yCenter;\n        this.setState({ yCenter })\n        this.handleHeight = handleHeight;\n\n        // for really narrow windows, put the label\n        // top and center\n        // let labelX, labelY, \n        // trackX, trackWidth;\n        // // if (width < 300) {\n        // labelX = el => width / 2 - d3.select(el).node().getBBox().width / 2;\n        // // labelY = _ => 0;//yCenter + d3.select(el).node().getBBox().height * 0.25;\n        // // labelY = el => yCenter + d3.select(el).node().getBBox().height * 0.25;\n        // labelY = el => {\n        //     this.setMargin({ top: d3.select(el).node().getBBox().height })\n        //     // this.margin.top = d3.select(el).node().getBBox().height;\n        //     // yCenter += 4;\n        //     // this.setState({yCenter});\n        //     return d3.select(el).node().getBBox().height;\n        // }\n        let trackX = _ => this.state.margin.left,\n        trackWidth = _ => width - this.state.margin.left - this.state.margin.right;\n\n        // } else {\n        //     this.setMargin({ left: 140 });\n        //     // this.margin.left = 140;\n        //     labelX = el => 145 + 10 - d3.select(el).node().getBBox().width - 2 * handleWidth\n        //     labelY = el => yCenter + d3.select(el).node().getBBox().height * 0.25;\n        //     trackX = _ => this.state.margin.left;\n        //     trackWidth = _ => width - this.state.margin.left - this.state.margin.right;\n\n\n        // }\n\n        svg.attr(\"height\", height + \"px\");\n\n        // // add label and position it\n        // svg.append(\"text\")\n        //     .classed(\"track-label\", true)\n        //     .text(this.props.label || \"Double Slider\")\n        //     .attr(\"x\", function () { return labelX(this) })\n        //     .attr(\"y\", function () { return labelY(this) });\n        // // .attr(\"x\", function () { return (lpad + 10) - d3.select(this).node().getBBox().width - 2 * handleWidth })\n        // // .attr(\"y\", function () { return yCenter + d3.select(this).node().getBBox().height * 0.25 })\n\n        svg.append(\"rect\")\n            .classed(\"track\", true)\n            .attr(\"x\", function () { return trackX(this) })\n            .attr(\"width\", function () { return trackWidth(this) })\n\n            // .attr(\"x\", this.state.margin.left)\n            // .attr(\"width\", width - this.state.margin.left - this.state.margin.right)\n            .attr(\"y\", yCenter - trackHeight / 2)\n            .attr(\"height\", trackHeight);\n\n        // add selected track highlight\n        svg.append(\"rect\")\n            .classed(\"highlight\", true)\n            .attr(\"y\", yCenter - trackHeight / 2)\n            .attr(\"height\", trackHeight)\n\n        function dragstarted(d) {\n            d3.select(this).raise().classed(\"active\", true)\n        }\n\n        const limitX = this.limitX,\n            xToValue = this.xToValue,\n            updateLabels = this.updateLabels;\n\n        const updateTrackHighlight = this.updateTrackHighlight;\n\n        function dragged(d) {\n            d3.select(this).attr(\"x\", limitX(d3.event.x));\n            const yr = xToValue(limitX(d3.event.x))\n            d3.select(this)\n                .attr(\"transform\", x => `translate(${limitX(d3.event.x)},${yCenter - handleHeight / 2})`)\n\n            d3.select(this).attr(\"data-value\", d.value = yr);\n            // d3.select(this).select(\".value-label\").text(yr)\n            updateLabels();\n            updateTrackHighlight();\n        }\n\n        const updateRange = this.updateRange;\n\n        function dragended(d) {\n            d3.select(this).classed(\"active\", false)\n            updateRange();\n        }\n\n        const data = this.props.selections ? this.props.selections.map(x => { return { value: x } }) : [{ value: this.props.min }, { value: this.props.max }];\n\n        const handleLayer = svg.append(\"g\")\n            .classed(\"handle-layer\", true);\n\n        const handleGroups = handleLayer\n            .selectAll(\"g.handle\")\n            .data(data)\n            .enter()\n            .append(\"g\")\n            .classed(\"handle\", true)\n            .attr(\"x\", x => this.valueToX(x.value))\n            .attr(\"transform\", x => `translate(${this.valueToX(x.value)},${yCenter - handleHeight / 2})`)\n            .call(d3.drag()\n                .on(\"start\", dragstarted)\n                .on(\"drag\", dragged)\n                .on(\"end\", dragended))\n\n\n        updateTrackHighlight();\n        const svgString = \"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxNy4xNTEiIHZpZXdCb3g9IjAgMCAxMyAxNy4xNTEiPjxwYXRoIGQ9Ik0yNDAsNDQwVjQyOWgxMnYxMWwtNiw1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzOS41IC00MjguNSkiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9zdmc+\";\n\n        handleGroups.append(\"image\")\n            .classed(\"handle-icon\", true)\n            .attr(\"xlink:href\", `data:image/svg+xml;base64,${svgString}`)\n            .attr(\"x\", 0)\n            .attr(\"y\", 0)\n            .attr(\"width\", handleWidth)\n            .attr(\"height\", handleHeight)\n\n        handleGroups.append(\"text\")\n            .classed(\"value-label\", true)\n            .text(d => d.value)\n            .attr(\"transform\", function () {\n                return `translate(${\n                    handleWidth / 2 - d3.select(this).node().getBBox().width / 2\n                    },${\n                    yCenter\n                    + handleHeight / 2\n                    + 1})`\n            })\n\n        d3.select(window).on(\"resize.doubleslider\" + this.props.label, this.redrawChart.bind(this))\n\n    }\n\n    // initializeChartOld() {\n\n    //     const svg = d3.select(this.svg).html(\"\"),\n    //         bbox = svg.node().getBoundingClientRect(),\n    //         width = bbox.width,\n    //         height = bbox.height,\n    //         handleHeight = this.props.handleHeight || 17.151,\n    //         handleWidth = this.props.handleWidth || 13,\n    //         trackHeight = this.props.trackHeight || 6,\n    //         yCenter = this.margin.top + (height - this.margin.bottom) / 2;\n\n    //     this.width = width;\n    //     this.height = height;\n    //     this.handleWidth = handleWidth;\n    //     this.yCenter = yCenter;\n    //     this.handleHeight = handleHeight;\n\n    //     svg.attr(\"height\", height + \"px\");\n\n    //     const label = svg.append(\"text\")\n    //         .text(this.props.label || \"Double Slider\")\n    //         .attr(\"x\", function () { return 120 - d3.select(this).node().getBBox().width - 2 * handleWidth })\n\n    //     label.attr(\"y\", function () {\n    //         return yCenter\n    //             + d3.select(this).node().getBBox().height * 0.25\n    //     })\n\n    //     this.margin.left = 120;\n    //     // this.margin.left = label.node().getBBox().width\n    //     //     + label.node().getBBox().x\n    //     //     + handleWidth;\n\n    //     svg.append(\"rect\")\n    //         .classed(\"track\", true)\n    //         .attr(\"x\", this.margin.left)\n    //         .attr(\"width\", width - this.margin.left - this.margin.right)\n    //         .attr(\"y\", yCenter - trackHeight / 2)\n    //         .attr(\"height\", trackHeight);\n\n\n    //     // add selected tract\n    //     const trackHighlight = svg.append(\"rect\")\n    //         .classed(\"highlight\", true)\n    //         .attr(\"y\", yCenter - trackHeight / 2)\n    //         .attr(\"height\", trackHeight)\n\n\n    //     function dragstarted(d) {\n    //         d3.select(this).raise().classed(\"active\", true)\n    //             .transition().duration(250)//.ease(d3.easeQuadIn)\n    //         // .attr(\"transform\",\"skewX(10)\")\n    //         // .attr(\"height\",handleHeight * 0.7)\n    //         // .attr(\"y\", yCenter - handleHeight * 0.7 / 2)\n    //         // .attr(\"width\",handleWidth * 0.7);\n\n    //     }\n\n    //     const limitX = this.limitX,\n    //         xToValue = this.xToValue,\n    //         // valueToX = this.valueToX,\n    //         updateLabels = this.updateLabels;\n    //     // range = this.state.range;\n\n    //     const updateTrackHighlight = this.updateTrackHighlight;\n    //     function dragged(d) {\n    //         d3.select(this).attr(\"x\", limitX(d3.event.x));\n    //         const yr = xToValue(limitX(d3.event.x))\n    //         d3.select(this)\n    //             .attr(\"transform\", x => `translate(${limitX(d3.event.x)},${yCenter - handleHeight / 2})`)\n    //         d3.select(this).attr(\"data-value\", d.value = yr);\n    //         d3.select(this).select(\".value-label\").text(yr)\n    //         updateLabels();\n\n    //         // \n    //         // let xValues = [];\n    //         // svg.selectAll(\".handle\")\n    //         //     .each(function () {\n    //         //         xValues.push(Number(d3.select(this).attr(\"x\")));\n    //         //     });\n\n    //         // trackHighlight\n    //         //     .attr(\"x\", d3.min(xValues) + handleWidth / 2)\n    //         //     .attr(\"width\", d3.max(xValues) - d3.min(xValues))\n    //         updateTrackHighlight();\n    //     }\n\n    //     const updateRange = this.updateRange;\n\n    //     function dragended(d) {\n    //         d3.select(this).classed(\"active\", false)\n    //         updateRange();\n    //     }\n\n    //     const handleLayer = svg.append(\"g\")\n    //         .classed(\"handle-layer\", true);\n\n    //     const data = this.props.selections ? this.props.selections.map(x => { return { value: x } }) : [{ value: this.props.min }, { value: this.props.max }];\n\n    //     const handleGroups = handleLayer\n    //         .selectAll(\"g.handle\")\n    //         .data(data)\n    //         .enter()\n    //         .append(\"g\")\n    //         .classed(\"handle\", true)\n    //         .attr(\"x\", x => this.valueToX(x.value))\n    //         .attr(\"transform\", x => `translate(${this.valueToX(x.value)},${yCenter - handleHeight / 2})`)\n    //         .call(d3.drag()\n    //             .on(\"start\", dragstarted)\n    //             .on(\"drag\", dragged)\n    //             .on(\"end\", dragended))\n\n\n    //     const svgString = \"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMyIgaGVpZ2h0PSIxNy4xNTEiIHZpZXdCb3g9IjAgMCAxMyAxNy4xNTEiPjxwYXRoIGQ9Ik0yNDAsNDQwVjQyOWgxMnYxMWwtNiw1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzOS41IC00MjguNSkiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2FhYSIgc3Ryb2tlLXdpZHRoPSIxIi8+PC9zdmc+\";\n\n    //     handleGroups.append(\"image\")\n    //         .classed(\"handle-icon\", true)\n    //         .attr(\"xlink:href\", `data:image/svg+xml;base64,${svgString}`)\n    //         .attr(\"x\", 0)\n    //         .attr(\"y\", 0)\n    //         .attr(\"width\", handleWidth)\n    //         .attr(\"height\", handleHeight)\n    //     // .attr(\"xlink:href\", { sliderHandleIcon })\n\n    //     // handleGroups.append(\"rect\")\n    //     //     .attr(\"width\", handleWidth)\n    //     //     .attr(\"height\", handleHeight)\n    //     // .attr(\"transform\", x => `translate(${this.valueToX(x.value)},0)`)\n    //     // .attr(\"y\", yCenter - handleHeight / 2)\n\n    //     // .attr(\"x\", x => this.valueToX(x.value))\n    //     // .attr(\"y\", yCenter - handleHeight / 2)\n\n    //     handleGroups.append(\"text\")\n    //         .classed(\"value-label\", true)\n    //         .text(d => d.value)\n    //         .attr(\"transform\", function () {\n    //             return `translate(${\n    //                 handleWidth / 2 - d3.select(this).node().getBBox().width / 2\n    //                 },${\n    //                 yCenter\n    //                 + handleHeight / 2\n    //                 + 1})`\n    //         })\n\n    //     d3.select(window).on(\"resize.doubleslider\" + this.props.label, this.redrawChart.bind(this))\n\n\n    //     // this.setState({ handles });\n\n\n    // }\n\n    // updateChartOld() { }\n\n    repositionHandles(arr) {\n        if (!arr) { arr = [this.props.min, this.props.max] }\n        // if (arr.length !== 2) { return }\n\n        const handleLayer = d3.select(this.svg).select(\".handle-layer\")\n        handleLayer.selectAll(\".handle\")\n            .data(arr.map(x => { return { value: x } }))\n            .attr(\"x\", x => this.valueToX(x.value))\n            .attr(\"transform\", x => `translate(${this.valueToX(x.value)},${this.state.yCenter - this.handleHeight / 2})`);\n\n    }\n\n    componentDidUpdate(oldProps, newData) {\n        super.componentDidUpdate.call(this);\n\n        function legitArray(arr) {\n            if (!arr) { return [-1, -1] }\n            return arr;\n        }\n\n        const oldArr = legitArray(oldProps.selections),\n            newArr = legitArray(this.props.selections);\n\n        function arrsMatch(arr1, arr2) {\n            if (arr1.length !== arr2.length) { return false };\n            for (let i = 0; i < arr1.length; i++) {\n                if (arr1[i] !== arr2[i]) { return false }\n            }\n            return true;\n        }\n\n        if (!arrsMatch(oldArr, newArr)) {\n            if (!this.props.selections) {\n                // reset detected\n                this.repositionHandles(this.props.selections);\n                this.updateLabels();\n                this.updateTrackHighlight();\n            }\n        }\n\n\n        // this.repositionHandles(this.props.selections);\n        // this.updateLabels();\n        // this.updateTrackHighlight();\n    }\n\n\n    render() {\n        return (\n            <div className=\"DoubleSlider\">\n                <div className=\"track-label\">{this.props.label}</div>\n                <div className=\"track-wrapper\">\n                    {D3Component.prototype.render.call(this)}\n                </div>\n                {/* <div className=\"label-container\">\n                    <div className=\"label min\">{this.state.labels[0].value}</div>\n                    <div className=\"label max\">{this.state.labels[1].value}</div>\n                </div> */}\n            </div>)\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\n// import numeral from \"numeral\";\n\n\nexport default class extends React.Component {\n    render() {\n        let ret=(null);\n        if (!this.props.selections || this.props.selections.length < 1) {\n\n            ret = (\n                <div className=\"unselected-item\">\n                    <div className=\"x-icon\"></div>\n                    <div>\n                    {this.props.hoverText || \" \"}\n                    </div>\n                </div>                \n            )\n        } else {\n            let htext = this.props.hoverText.trim().length > 0 ? this.props.hoverText : this.props.label || \" \";\n            ret = (\n                <div \n                className=\"selected-item\"\n                onClick={this.props.dropCallback}\n                >\n                    <div className=\"x-icon\"></div>\n                    {/* <div>{this.props.label}</div> */}\n                    <div>{htext}</div>\n                </div>\n            )\n        }\n\n        return <div className=\"HoverText\">{ret}</div>\n\n        \n    }\n}","import React from 'react';\nimport { Histogram } from \"../../Viz/\";\nimport { DoubleSlider } from \"../../Inputs\";\n\nimport \"./style/main.scss\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        // this.state = {\n        //     selections: props.selections\n        // }\n        \n        this.updateRangeFactory = this.updateRangeFactory.bind(this);\n\n    }\n\n    updateRangeFactory(key) {\n        return value => {\n            var newDict = { ...this.props.selections }\n            newDict[key] = value\n            this.props.updateSelections(newDict)\n        }\n    }\n\n    render() {\n\n        const itemProps = {\n            ...this.props,\n            margin: {\n                top: 0,\n                left: 30,\n                right: 10,\n                bottom: 20\n            }\n        };\n        const modeClass = this.props.subsetMode ? \"subset-mode\" : \"full-mode\";\n\n        return (\n            <div className={\"BirthYear module-box \" + modeClass}>\n                <h3 className=\"title\">Dates</h3>\n                <div className=\"Histogram\">\n                    <Histogram\n                        {...itemProps}\n                    ></Histogram>\n                </div>\n\n\n                <div className=\"slider-container\">\n                    <div className=\"half\">\n                        <DoubleSlider\n                            label=\"Birth year\"\n                            updateSelections={this.updateRangeFactory(\"birth\")}\n                            selections={this.props.selections.birth}\n                            min={this.props.BIRTH_MIN}\n                            max={this.props.BIRTH_MAX}\n                            margin={{ top: 2, bottom: 10, left: 20, right: 40 }}\n                        ></DoubleSlider>\n\n                    </div>\n                    <div className=\"half\">\n                        <DoubleSlider\n                            label=\"Recording year\"\n                            selections={this.props.selections.recording}\n                            updateSelections={this.updateRangeFactory(\"recording\")}\n                            min={this.props.RECORDING_MIN}\n                            max={this.props.RECORDING_MAX}\n                            margin={{ top: 2, bottom: 10, left: 20, right: 40 }}\n                        ></DoubleSlider>\n                    </div>\n\n                </div>\n\n\n            </div>\n        )\n    }\n}\n","import React from 'react';\nimport \"./style/main.scss\";\nimport TagFilter from \"../../Inputs/TagFilter\";\n\n\nexport default class extends React.Component {\n\n    render() {\n        const props = {\n            ...this.props,\n            lazy: true\n        };\n\n        return (\n            <div className=\"SubjectHeadings\">\n                <TagFilter {...props}></TagFilter>\n            </div>);\n\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\nimport { ItemSelector, HoverText } from \"../../Inputs\";\nimport { TreeMap } from \"../../Viz\";\nimport { objectToArray } from \"../Common\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = { hoverText: \" \" }\n        this.setText = this.setText.bind(this);\n        this.handleMouseIn = this.handleMouseIn.bind(this);\n        this.handleMouseOut = this.handleMouseOut.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n        this.label = this.label.bind(this);\n\n    }\n\n\n    label() {\n        if (!this.props.selections || this.props.selections.length < 1) { return \"\" }\n        return this.props.selections[0].label;\n    }\n\n\n\n    setText(hoverText) {\n        this.setState({ hoverText })\n    }\n\n    handleMouseIn(item) {\n        this.setText(item.label)\n    }\n\n    handleClick(item) {\n\n        if (this.props.selections\n            && this.props.selections.length > 0\n            && this.props.selections[0].id === item.id) {\n            this.props.updateSelections([])\n        } else {\n            this.props.updateSelections([item])\n        }\n\n    }\n\n    handleMouseOut() {\n        this.setText(\" \");\n    }\n\n    render() {\n\n        return (\n            <div className=\"Programs module-box\">\n\n                <h3 className=\"title\">Affiliate programs</h3>\n\n                <TreeMap\n                    items={objectToArray(this.props.programs)}\n                    itemDict={this.props.programs}\n\n                    mouseInCallback={this.handleMouseIn}\n                    mouseOutCallback={this.handleMouseOut}\n                    selections={this.props.selections}\n                    clickCallback={this.handleClick}\n                ></TreeMap>\n\n                {/* <div className=\"hover-text\">\n                    {this.state.hoverText}\n                </div> */}\n                <HoverText\n                    selections={this.props.selections}\n                    hoverText={this.state.hoverText}\n                    dropCallback={() => { this.props.updateSelections([]) }}\n                    label={this.label()}\n                ></HoverText>\n\n                <ItemSelector\n                    updateSelections={this.props.updateSelections}\n                    items={objectToArray(this.props.programs)}\n                    selections={this.props.selections}\n                    placeholder={\"All affiliate programs\"}\n                ></ItemSelector>\n\n\n                {/* <ItemSelection></ItemSelection> */}\n                {/* <TagFilter {...this.props}></TagFilter> */}\n            </div>\n        );\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\n// import TagFilter from \"../../Inputs/TagFilter\";\nimport CountListWithBars from \"../CountListWithBars\";\n\nimport { TextInput } from \"../../Inputs\";\n\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            searchTerm: '',\n        }\n        this.updateSelections = this.updateSelections.bind(this);\n        this.updateSearchTerm = this.updateSearchTerm.bind(this);\n        this.dropSelection = this.dropSelection.bind(this);\n        this.handleItemClick = this.handleItemClick.bind(this);\n\n    }\n\n    dropSelection(item) {\n        this.props.updateSelections(this.props.selections.filter(i => i.id !== item.id))\n    }\n\n    updateSearchTerm(searchTerm) {\n\n\n        this.setState({\n            searchTerm, \n        })\n\n\n    }\n\n    updateSelections() {\n\n        // this.updateSearchTerm(this.state.searchTerm);\n        this.updateSearchTerm(\"\");\n        this.props.updateSelections.apply(null, arguments);\n\n    }\n\n    handleItemClick(item) {\n        // if you click an item that's already selected, unselect it.\n        // otherwise, select it\n        const selections = this.props.selectionsDict; //arrayToObject(this.props.selections);\n        const selectionsWithoutCurrentItem = this.props.selections.filter(i => i.id !== item.id);\n\n        if (item.id in selections) { this.updateSelections(selectionsWithoutCurrentItem) }\n        else { this.updateSelections(selectionsWithoutCurrentItem.concat([item])) }\n\n        // this.updateSelections(this.props.selections.filter(i=>i.id !== item.id).concat([item]))\n    }\n\n    render() {\n\n        // 6-3-19 - updated to expect an array and a dictionary to prevent\n        // the need to use arrayToObject(dict+arr+interviewers)\n        const [items, itemDict] = this.props.filterItems(this.state.searchTerm);\n\n        const listProps = {\n            showBars: this.props.showBars,\n            updateSelections: this.updateSelections,\n            items,//: items,\n            allItems: this.props.allInterviewers,\n            showAll: false,\n            itemDict,//: arrayToObject(items),\n            handleItemClick: this.handleItemClick,\n            selections: this.props.selectionsDict,//arrayToObject(this.props.selections)\n            //allowMultipleSelections: true,\n            // items: this.state.filteredItems\n            // items: objectToArray(this.props.interviewers)\n        }\n\n        return (\n            <div className=\"Interviewers module-box\">\n                <h3 className=\"title\">Interviewers</h3>\n                <div className=\"input-wrapper\">\n                    <TextInput\n                        placeholder=\"Search by name\"\n                        callback={this.updateSearchTerm}\n                        value={this.state.searchTerm}>\n                        ></TextInput>\n                </div>\n                {/* <div>\n                    <SelectionPool\n                    callback={(this.dropSelection)}\n                    items={this.props.selections}></SelectionPool>\n                </div> */}\n                <CountListWithBars {...listProps}></CountListWithBars>\n            </div>);\n\n    }\n}","import React from 'react';\nimport \"./style/main.scss\";\nimport { Cluster } from \"../../Viz\";\nimport { objectToArray } from \"../Common\";\nimport { normalizeString } from \"../../Common\";\nimport { HoverText } from \"../../Inputs\";\n\nimport Autosuggest from 'react-autosuggest';\n\nexport default class extends React.Component {\n\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            searchTerm: \"\",\n            suggestions: [],\n            hoverText: \" \",\n        }\n\n        this.cleanClusterData = this.cleanClusterData.bind(this);\n\n        this.dropSelection = this.dropSelection.bind(this);\n        this.onMouseOut = this.onMouseOut.bind(this);\n        this.onMouseOver = this.onMouseOver.bind(this);\n\n        this.getSuggestions = this.getSuggestions.bind(this);\n        this.getSuggestionValue = this.getSuggestionValue.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.onSuggestionsClearRequested = this.onSuggestionsClearRequested.bind(this);\n        this.onSuggestionsFetchRequested = this.onSuggestionsFetchRequested.bind(this);\n        this.renderSuggestion = this.renderSuggestion.bind(this);\n        this.onSuggestionSelected = this.onSuggestionSelected.bind(this);\n        this.label = this.label.bind(this);\n        this.cleanPlaceName = this.cleanPlaceName.bind(this);\n\n        // this.renderHoverField = this.renderHoverField.bind(this);\n\n        this.cleanClusterData();\n\n    }\n\n    cleanPlaceName(item){\n        if (!item){ return \"\"}\n        let city = item.label.split(\"|\")[0].split(\",\")[0], \n        country = item.country;\n\n        if(city === country){ return country}\n        if (city && country){ return city + \", \" + country}\n        else if (city){ return city}\n        else if (country){ return country}\n        // return item.label.split(\"|\")[0].split(\",\")[0] + \", \" + item.country\n    }\n    label(){\n        if (!this.props.selections || this.props.selections.length < 1){ return \"\"}\n\n        return this.cleanPlaceName(this.props.selections[0]);\n//        return this.props.selections[0].label.split(\"|\")[0].split(\",\")[0] + \", \" + this.props.selections[0].country\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const shouldUpdate = (nextProps !== this.props)\n            || (nextState !== this.state);\n\n        return (shouldUpdate);\n    }\n\n\n    // the data needs to be reformatted a little bit \n    // in order to work with a cluster pack layout.\n    // we want to create a hierarchy of countries and cities\n    cleanClusterData() {\n        // if (this.state.cleanClusterData) { return this.state.cleanClusterData }\n        let addedCountries = [];\n\n        let clusterData = objectToArray(this.props.allBirthPlaces)\n            .filter(\n                // only keep places with a city and country, in theory\n                place => place.label.split(\"|\").filter(x => x && x.length > 0).length === 2\n            )\n            .map(item => {\n                let ret = { ...item };\n                // console.log(\"item\",item, item.id in this.props.birthPlaces)\n                if (!(item.id in this.props.birthPlaces)) {\n                    // console.log(\"removing\", item);\n                    ret.count = 0\n                }\n\n                // const element = ret;\n\n                // if (addedCountries.indexOf(country) < 0) { \n                //     addedCountries.push(country);\n                //     const label = `${country}|root`,\n                //         newItem = { label, id: label };\n                //     countryItems.push(newItem)\n                //  }\n\n                return ret\n            });\n\n        // clusterData = clusterData.concat(countryItems);\n\n        // add an item for each country\n        clusterData.forEach(element => {\n            const country = element.label.split(\"|\")[1];\n            if (addedCountries.indexOf(country) >= 0) { return }\n            addedCountries.push(country);\n            const label = `${country}|country`, // changed from \"root\" to \"country\"\n                newItem = { label, id: label, country };\n            clusterData.push(newItem)\n        });\n\n        clusterData.push({ label: \"country|\", id: \"country|\" })\n\n        // this.setState({ cleanClusterData: clusterData });\n        return clusterData;\n\n    }\n\n    getSuggestionValue(suggestion) {\n//        return suggestion.label;\n        return this.cleanPlaceName(suggestion);\n    }\n\n    getSuggestions = value => {\n        const all = this.cleanClusterData();\n        return all.filter(x => normalizeString(x.label).indexOf(normalizeString(value.replace(\":\",\"|\"))) >= 0)\n        // filter out roots\n            .filter(x => x.label.indexOf(\"|root\") < 0)\n            .filter(x => x.label.indexOf(\"root|\") < 0)\n        // return [{label: value + \" and a hot plate!\"}]\n    }\n\n    onChange(event, { newValue }) {\n        this.setState({\n            searchTerm: newValue\n        });\n    }\n\n    onSuggestionsFetchRequested = ({ value }) => {\n        this.setState({\n            suggestions: this.getSuggestions(value)\n        });\n\n    };\n\n    onSuggestionsClearRequested = () => {\n        this.setState({\n            searchTerm: \"\",\n            suggestions: []\n        });\n    };\n\n    renderSuggestion(suggestion) {\n        return (\n            <div className=\"suggestion\">\n                {this.cleanPlaceName(suggestion)}\n                {/* {suggestion.label.split(\"|\")[0].split(\",\").join(\", \")} */}\n            </div>\n        )\n    }\n\n    onSuggestionSelected(e, { suggestion }) {\n        this.props.updateSelections([suggestion])\n    }\n\n    dropSelection() {\n        this.props.updateSelections([])\n    }\n\n    onMouseOver(d) {\n        this.setState({ hoverText: this.cleanPlaceName(d) })\n\n        // this.setState({ hoverText: d.label.split(\"|\")[0].split(\",\")[0] + \", \" + d.country })\n    }\n\n    onMouseOut() {\n        this.setState({ hoverText: \" \" })\n    }\n\n    // renderHoverField() {\n    //     if (!this.props.selections || this.props.selections.length < 1) {\n\n    //         return (\n    //             <span>\n    //                 {this.state.hoverText || \" \"}\n    //             </span>\n    //         )\n    //     }\n    //     return (\n    //         <div \n    //         className=\"selected-item\"\n    //         onClick={this.dropSelection}\n    //         >\n    //             <div className=\"x-icon\"></div>\n    //             <div>{this.props.selections[0].label.split(\"|\")[0].split(\",\")[0] + \", \" + this.props.selections[0].country}</div>\n    //         </div>\n    //     )\n    // }\n\n    placeLabel(){\n\n    }\n\n\n    render() {\n\n        const inputProps = {\n            placeholder: 'Type a place name',\n            value: this.state.searchTerm,\n            onChange: this.onChange\n        };\n\n        return (\n            <div className=\"BirthPlaces module-box\">\n                <h3 className=\"title\">Birth places</h3>\n\n                <Cluster\n                    items={this.cleanClusterData()}\n                    // items={this.cleanClusterData()}\n                    // allItems={this.props.allBirthPlaces}\n                    itemDict={this.props.birthPlaces}\n                    selections={this.props.selections}\n                    onMouseOver={this.onMouseOver}\n                    onMouseOut={this.onMouseOut}\n                    updateSelections={this.props.updateSelections}\n                ></Cluster>\n\n                <Autosuggest\n                    suggestions={this.state.suggestions}\n                    onSuggestionsFetchRequested={this.onSuggestionsFetchRequested}\n                    onSuggestionsClearRequested={this.onSuggestionsClearRequested}\n                    getSuggestionValue={this.getSuggestionValue}\n                    onSuggestionSelected={this.onSuggestionSelected}\n                    renderSuggestion={this.renderSuggestion}\n                    inputProps={inputProps}\n                ></Autosuggest>\n\n                {/* <div className=\"hover-text\">\n                    {this.renderHoverField()}\n                </div> */}\n                <HoverText\n                    dropCallback={this.dropSelection}\n                    selections={this.props.selections}\n                    hoverText={this.state.hoverText}\n                    label={this.label()}\n                ></HoverText>\n\n            </div>\n        );\n    }\n}","import React from 'react';\nimport wrapResultListItem from \"./ResultListItem\";\nimport \"./style/main.scss\";\nexport default class extends React.Component {\n\n    render() {\n        return (<div className=\"ResultList\">\n            {this.props.items.map((item, idx)=>wrapResultListItem(item, idx))}\n        </div>);\n    }\n\n}","import React from 'react';\n\nexport default function wrapResultListItem(WrappedComponent, key){\n\n    return (\n        <div key={key} className=\"ResultListItem\">\n            {WrappedComponent}\n        </div>\n    )\n    // return class extends React.Component {\n    //     render(){return (\n    //         <div className=\"ResultListItem\">\n    //         </div>\n    //     )}\n    // }\n\n}\n","import React from 'react';\nimport \"./style/main.scss\";\nimport numeral from \"numeral\";\nimport { getRecordingYear } from \"../../Data\";\n// import {ResultList} from \"@bit/jakekara.metadash.fortunoff-app\"\nimport { ResultList } from \"../../FortunoffApp\";\n\nexport default class extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            limit: 1,\n            increment: 1\n\n        }\n\n        this.renderResult = this.renderResult.bind(this);\n        this.trackScrolling = this.trackScrolling.bind(this);\n        // this.maybeLoadMore = this.maybeLoadMore.bind(this);\n        this.resultsRef = React.createRef();\n\n        this.decideToIncrement = this.decideToIncrement.bind(this);\n\n        // if (this.props.pymChild) {\n        //     this.handlePymScroll = this.handlePymScroll.bind(this);\n        //     this.props.pymChild.onMessage('viewport-iframe-position', this.handlePymScroll);\n        // }\n    }\n\n    // maybeLoadMore(el){\n    //     return this.state.limit < props.items.length && el.getBoundClientRect().bottom <= window.innerHeight - 100;\n    // }\n\n\n    renderResult(result, i) {\n\n        // return class extends React.component {\n\n        //     render() {\n\n\n                return (\n                    <a\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        href={result.link}\n                        key={i}>\n                        <div className=\"result-item-container\">\n                            <div\n                                className={`result-item ${result.birth_years.length > 1 ? \"multiple\" : \"\"}`}>\n                                <div className=\"testimony-name\">\n                                    {result.title}\n                                </div>\n\n                                <div className=\"birth-year\">\n                                    {\n                                        result.birth_years\n                                            .filter(yr => yr)\n                                            .map(yr => (<li className=\"sub-item\" key={`by-${i}`}>{yr}</li>))\n                                            .concat(result.birth_place_cities\n                                                .filter((_, i) => result.birth_place_cities[i] || result.birth_place_countries[i])\n                                                .map((city, i) => (\n                                                    <li className=\"sub-item\" key={`bp-${i}`}>\n                                                        {city}{city && result.birth_place_countries[i] ? \", \" : \"\"}{result.birth_place_countries[i]}\n                                                    </li>\n                                                )\n                                                )\n\n                                            )\n                                            .slice(-2) // don't show more than two items\n\n                                    }\n\n                                </div>\n                                <div className=\"affiliate\">\n                                    {result.programs.map((ref, i) => (<li className=\"sub-item\" key={i}>{this.props.programs[ref].label}</li>))}\n                                </div>\n                                <div className=\"recording-year\">\n                                    {getRecordingYear(result)}\n                                </div>\n\n                                <div className=\"big-button-container\">\n                                    <div className=\"big-button\">View</div>\n                                </div>\n                            </div>\n                        </div>\n\n                    </a>\n                )\n\n        //     }\n        // }\n    }\n\n    handlePymScroll(parentInfo) {\n        // this.props.pymChild.sendMessage(\n        //     \"console-log\",\n        //     parentInfo.split(\" \").map(x => Number(x))\n        // );\n        // parentInfo contains in order\n        // Viewport width and height.\n        // Iframe top, left, bottom and right positions.\n\n        const arr = parentInfo.split(\" \").map(x => Number(x)),\n            vheight = arr[1],\n            ibottom = arr[4],\n            distanceFromBottom = ibottom - vheight;\n\n        this.decideToIncrement(distanceFromBottom);\n    }\n\n    decideToIncrement(distanceFromBottom) {\n        // this.props.pymChild.sendMessage(\"console-log\", distanceFromBottom);\n        if (this.props.results.length > this.state.limit\n            && distanceFromBottom < 100) {\n            this.setState({ limit: this.state.limit + this.state.increment })\n        }\n\n    }\n\n    trackScrolling() {\n        const scrollBottom = window.pageYOffset + window.innerHeight;\n        const distanceFromBottom = window.document.body.offsetHeight - scrollBottom;\n\n        this.decideToIncrement(distanceFromBottom);\n\n        // if (this.props.results.length > this.state.limit\n        //     && distanceFromBottom < 100) {\n        //     this.setState({ limit: this.state.limit + this.state.increment })\n        // }\n    }\n\n    componentDidMount() {\n        document.addEventListener(\"scroll\", this.trackScrolling);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"scroll\", this.trackScrolling);\n    }\n\n    render() {\n        return (\n            <div\n                className=\"Results\">\n                <div className=\"prose\">\n                    There are <span className=\"stat\">{numeral(this.props.results.length).format(\"0,0\")}</span> testimonies with matching criteria.\n                </div>\n                <div className=\"headers\">\n                    <div className=\"testimony-name\">\n                        Testimony title\n                    </div>\n                    <div className=\"birth-year\">\n                        Birth year / place\n                        </div>\n                    <div className=\"affiliate\">\n                        Affiliate\n                    </div>\n                    <div className=\"recording-year\">\n                        Recording year\n                    </div>\n\n                    <div className=\"big-button-container\">\n                        &nbsp;\n                    </div>\n                </div>\n                <div\n                    \n                    ref={this.resultsRef}\n                    className=\"results-container\">\n                    \n                </div>\n                {/* {this.props.results.slice(0, this.state.limit).map(this.renderResult)} */}\n                <ResultList\n                    items={this.props.results.slice(0, this.state.limit).map(this.renderResult)}\n                ></ResultList>\n\n            </div>\n        );\n    }\n}","import React from 'react';\n\n// import { TagFilter, RangeSlider } from '../Inputs';\n// import { BarChart, DonutChart } from \"../Viz\";\n\n// import OverviewBillboard from \"./OverviewBillboard\";\nimport IntroProse from \"./IntroProse\";\nimport Gender from \"./Gender\";\nimport Languages from \"./Languages\";\nimport BirthAndRecordingYear from \"./BirthAndRecordingYears\";\nimport SubjectHeadings from \"./SubjectHeadings\";\nimport Programs from \"./Programs\";\nimport Interviewers from \"./Interviewers\";\nimport BirthPlaces from \"./BirthPlaces\";\nimport Results from \"./Results\";\nimport { objectToArray, arrayToObject } from \"./Common\";\nimport pym from \"pym.js\";\n\nimport \"./style/main.scss\";\n\n// TODO - Generate these numbers from the complete data set\n// rather than hard-coding them. \nconst data = require(\"../Data\");\nconst BIRTH_MIN = 1892;\nconst BIRTH_MAX = 1960;\nconst RECORDING_MIN = 1979;\nconst RECORDING_MAX = 2017;\n\nconst DEFAULT_FILTERS = {\n    \"gender\": [\"Men\", \"Women\", \"Both\"],\n    \"birthYear\": [],\n    \"birthCountry\": [],\n    \"language\": [],\n    \"yearRecorded\": [],\n    \"subjects\": [],\n    \"interviewers\": [],\n    \"programs\": [],\n    \"dateRanges\": {}\n};\n\nexport default class extends React.Component {\n\n    constructor(props) {\n\n        super(props);\n        this.fullData = data.getData();\n\n        this.state = {\n            ...this.fullData,\n            // resources: data.resources.query(),\n            // summaryData: summaryData,\n            filters: DEFAULT_FILTERS,\n        }\n\n\n        this.setFilters = this.setFilters.bind(this);\n        this.clearFilters = this.clearFilters.bind(this);\n        this.updateFilterFactory = this.updateFilterFactory.bind(this);\n        this.pymChild = new pym.Child({ polling: 50});\n\n    }\n\n    setFilters(filters) {\n        filters = filters || DEFAULT_FILTERS;\n        const { resources, subjects, summaryData } = data.getData(filters);\n\n        this.setState({\n            filters,\n            resources,\n            subjects,\n            summaryData\n        })\n    }\n\n    clearFilters() { this.setFilters() }\n\n    updateFilterFactory(key) {\n        return val => {\n            var filters = { ...this.state.filters }\n            filters[key] = val;\n            this.setFilters(filters);\n\n            // --- MOVED TO setFilters --\n            // const { resources, subjects, summaryData } = data.getData(filters);\n\n            // this.setState({\n            //     filters: filters,\n            //     resources,\n            //     subjects,\n            //     summaryData\n            // });\n        }\n    }\n\n    render() {\n\n        // console.log(\"MetaDash.render state\", this.state);\n\n        let genderSubjects = [];\n        Object.keys(this.state.summaryData.subjects).forEach(s => {\n            if ([\"Men\", \"Women\"].indexOf(this.state.summaryData.subjects[s].label) >= 0) {\n                genderSubjects.push(this.state.summaryData.subjects[s]);\n            }\n        })\n\n        return (\n            <div className=\"MetaDash\">\n\n                <section className=\"prose intro-prose-section\">\n                    <IntroProse\n                        items={this.state.resources}\n                        filters={this.state.filters}\n                        summaryData={this.state.summaryData}\n                        BIRTH_MIN={BIRTH_MIN}\n                        BIRTH_MAX={BIRTH_MAX}\n                        RECORDING_MIN={RECORDING_MIN}\n                        RECORDING_MAX={RECORDING_MAX}\n\n                    ></IntroProse>\n                </section>\n\n                <section className=\"module-area\">\n\n                    {/* <OverviewBillboard\n                        testimonyCount={this.state.resources.length}\n                    ></OverviewBillboard> */}\n                    <div className=\"text-menu\">\n                        <div\n                            className=\"item\"\n                            onClick={this.clearFilters}\n                        >Clear filters</div>\n                        <div className=\"item\">Documentation</div>\n                    </div>\n\n                    <Gender\n                        updateSelections={this.updateFilterFactory(\"gender\")}\n                        men={this.state.summaryData.gender.men.count}\n                        women={this.state.summaryData.gender.women.count}\n                        both={this.state.summaryData.gender.both.count}\n                    ></Gender>\n\n                    <Languages\n                        updateSelections={this.updateFilterFactory(\"language\")}\n                        selections={this.state.filters.language}\n                        items={objectToArray(this.state.summaryData.languages)}\n                        itemDict={this.state.summaryData.languages}\n                        allItems={objectToArray(this.fullData.summaryData.languages)}\n                    ></Languages>\n\n                    <BirthAndRecordingYear\n                        // height={200}\n                        minYear={BIRTH_MIN}\n                        maxYear={RECORDING_MAX}\n                        BIRTH_MIN={BIRTH_MIN}\n                        BIRTH_MAX={BIRTH_MAX}\n                        RECORDING_MIN={RECORDING_MIN}\n                        RECORDING_MAX={RECORDING_MAX}\n                        updateSelections={this.updateFilterFactory(\"dateRanges\")}\n                        selections={this.state.filters.dateRanges}\n                        subsetMode={this.fullData.resources.length > this.state.resources.length}\n                        data={\n                            Object.keys(this.state.summaryData.birthYears)\n                                .map(k => this.state.summaryData.birthYears[k])\n                                // TODO - the data needs to be cleaned up \n                                // so we don't need to manually exclude stuff\n                                .filter(yrs => yrs.label >= BIRTH_MIN && yrs.label <= BIRTH_MAX)\n                                .map(a => { return { ...a, barClass: \"birth\" } })\n                                .concat(\n                                    Object.keys(this.state.summaryData.recordingYears)\n                                        .map(k => this.state.summaryData.recordingYears[k])\n                                        .filter(yrs => yrs.label >= RECORDING_MIN && yrs.label <= RECORDING_MAX)\n                                        .map(a => { return { ...a, barClass: \"recording\" } })\n                                )\n                        }\n                    ></BirthAndRecordingYear>\n\n                    <BirthPlaces\n                        updateSelections={this.updateFilterFactory(\"birthplaces\")}\n                        selections={this.state.filters.birthplaces}\n                        birthPlaces={this.state.summaryData.birthPlaces}\n                        allBirthPlaces={this.fullData.summaryData.birthPlaces}\n                        placeholder=\"Search for a city...\"\n                    ></BirthPlaces>\n\n                    <Interviewers\n                        interviewers={this.state.summaryData.interviewers}\n                        allInterviewers={this.fullData.summaryData.interviewers}\n                        updateSelections={this.updateFilterFactory(\"interviewers\")}\n                        selections={this.state.filters.interviewers}\n                        selectionsDict={arrayToObject(this.state.filters.interviewers)} // TODO - improve efficiency\n                        // allInterviewers={ data.interviewers.search() } // TODO - improve efficiency\n                        filterItems={t => {\n                            // 6-3-19 - just updated to return both an array and a dictionary\n                            // so it doesn't have to be retouched later on. (dict+arr+interviewers)\n                            const results = data.interviewers.search((t || \"\").split(\" \"));\n                            let retDict = {}\n                            let retArr = results\n                            .filter(i => i.id in this.state.summaryData.interviewers)\n                            .map(i => { \n                                const retItem = { ...i, count: this.state.summaryData.interviewers[i.id].count }\n                                retDict[i.id] = retItem;\n                                return retItem;\n                             })\n\n                            return [retArr, retDict];\n                            // return results\n                            //     .filter(i => i.id in this.state.summaryData.interviewers)\n                            //     .map(i => { return { ...i, count: this.state.summaryData.interviewers[i.id].count } })\n                        }}\n                    ></Interviewers>\n\n                    <Programs\n                        updateSelections={this.updateFilterFactory(\"programs\")}\n                        selections={this.state.filters.programs}\n                        allItems={this.state.summaryData.programs}\n                        programs={this.state.summaryData.programs}\n                        filterItems={data.programs.search}\n                        placeholder=\"Begin searching programs...\">\n                    </Programs>\n\n                </section>\n\n                <section className=\"headings-area\">\n                    <SubjectHeadings\n                        title=\"Subjects\"\n                        updateSelections={this.updateFilterFactory(\"subjects\")}\n                        selections={this.state.filters.subjects}\n                        allItems={this.state.summaryData.subjects}\n                        filterItems={data.subjects.search}\n                        placeholder=\"Begin searching subjects...\">\n                    </SubjectHeadings>\n                </section>\n\n                <section className=\"results-section\">\n                    <Results\n                        pymChild={this.pymChild}\n                        programs={this.state.summaryData.programs}\n                        results={this.state.resources}\n                    ></Results>\n                </section>\n            </div >\n        );\n    }\n\n}\n","import React from 'react';\nimport \"./style/main.scss\";\n\nconst yaleLogoImgData = \"iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAABGdBTUEAALGOGCHvlwAAA/5JREFUaAXtmP1x2kAQxeNM/o9KUCoIHVjugFQQpQKTChRXgFMBpALcgZQKIBWIDkwHzu+JO3tHn2CQR4P1Zp52b3dv7/ZWEhqunp6ePrwnfHxPxarWseBL7/jY4bHDF3YC4y19YQ2tlDN2uHIkF2YYO3xhDa2UM3a4ciQXZhg7fGENrZTzqWIZjiFiK9dQMoN38GRcDegfj4BqbmHkiCiw4XoDd/vhaVc9wynU/zxdjIgpo2uOch8KFSyUC3uosRWBr7qowzCEc1jGCsMEKqaJAb4YPkJBcgZlb5rTZbd7SU7IU1nHv6W3nNZPR3twsm+soUZXR9QFD91+91D21+KUua1r+oJ9kDaa+QFyBkMzblLnOAL4C27gYFEuWBv9UdrtojQuDycYYriFd3DQqCt4y47vza4jdLEJ6q5QPqi9dWDXuoK1RXVqZ/ba1OUpMRF8gBkcPJo+PFSsXmK+0BA9hktooe4qtqu7E2Ii+Bn+gxnUvHMiJJnW+Qr/wq0jwqDjlZ/i99DPjf2pSZxDP0GV17+zTZG54xrpoVwxbJqX+ECk9KY42SOYQuVcOSIKpFwn8Hn+s2KNRlewRcJAcwKoBdZuXJdngU/QJrx/Vlj2F81XHu+zMtmHFFfp1mf12MVpHzbXhLHyC5IhLObZyU36XLMMNHnhxhGybp4tTIvbmNzNlYih9Xk9kdMhQXq7lVMfgAxrYuy+F95vEzTpAcH+tFCL20dyAevm2Pi8JibF5pGg1OWQ3SNBqYvJXcCqwR85v0QOixxNLy3zlBcvF/sCi3DqhSNbE77hyJqcZ7DH5AhdHr2o6r7ZA+eXCL1+SMGKXcJbqOTCEqroOsie1TnOaLs2uX6jb8y4VT20YCWxBVq9dYGSM2QsnorQJFCxmRm3qscU3JqoxRngm0LdIdLPgei1SZq+tF6bz85TkSv4CL9DPfNf4BaeE+ExyfrqcM4m/EZu0DN4TmQki1xCPc9Lp3eKPjocsWroVt4hM6efU2xMshj94Eelj4LtG1QF94E/paR6dNow885jCranGPkEHTLEL3ooR+gHSJszNvYudUPA0gRF6GsoaREy0GHoHbJfy3+BtEh9sSxgGfrCka/4gjEyLAXqKy2BC5jCObRYM8ih7MqlLzXZPKTLVl5HthSWkWNIoc+xQn+eX05ix8QdjJRIOzdm/GhmS0+gFhb9ZlCLuBlS861dPoucgV3D65orXxnKNYU+rpB9/i+tW2gCBd2Cu0J7ucgXwDrfS9Thms+nGY05+yz48K2+YeQxL6033FZ/S40F93e2w8g8dngYfehvF2OH+zvbYWQeOzyMPvS3i7HD/Z3tMDKPHR5GH/rbxdjh/s52GJnfXYf/Ax099yeWp4N/AAAAAElFTkSuQmCC\"\nconst YaleLogoImage = () => <image x=\"0\" y=\"0\" width=\"42\" height=\"42\" href={`data:image/jpeg;base64,${yaleLogoImgData}`} />\n\n\nconst YaleLogoSVG = () => {\n    return (\n        <svg width=\"41px\" height=\"19px\" viewBox=\"0 0 41 19\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n            <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\n                <g transform=\"translate(-26.000000, -31.000000)\">\n                    <g transform=\"translate(26.000000, 20.000000)\">\n                        <YaleLogoImage></YaleLogoImage>\n                    </g>\n                </g>\n            </g>\n        </svg>\n    );\n}\n\nconst FortunoffTitleSVG = () => {\n    return (<svg width=\"218px\" height=\"40px\" viewBox=\"0 0 218 40\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\">\n        <g stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\" fontFamily=\"YaleNew-Roman, YaleNew\" fontSize=\"19\" fontWeight=\"normal\" line-spacing=\"24\">\n            <g transform=\"translate(-121.000000, -23.000000)\" fill=\"#1098AB\">\n                <text>\n                    <tspan x=\"121\" y=\"38\">Fortunoff Video Archive</tspan>\n                    <tspan x=\"121\" y=\"62\">for Holocaust Testimonies</tspan>\n                </text>\n            </g>\n        </g>\n    </svg>)\n}\n\nexport default class extends React.Component {\n    render() {\n        return (\n            <header className=\"SiteBanner\">\n                <div className=\"site-logo\">\n                    <a alt=\"Yale University Library\" href=\"https://web.library.yale.edu/\"><YaleLogoSVG></YaleLogoSVG></a>\n                </div>\n                <div className=\"site-title\">\n                    <a alt=\"Fortunoff Video Archive for Holocaust Testimonies\" href=\"https://fortunoff.library.yale.edu/\">\n                    <FortunoffTitleSVG></FortunoffTitleSVG>\n                    </a>\n                </div>\n            </header>\n        );\n    }\n}","import React from 'react';\nimport MetaDash from './MetaDash';\nimport SiteBanner from './SiteBanner';\nimport {fortunize} from \"./FortunoffApp\";\n\nfunction App() {\n  const FortunizedApp = fortunize(MetaDash)\n  return (\n    <div className=\"App\">\n      <SiteBanner></SiteBanner>\n      <FortunizedApp></FortunizedApp>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport \"./style/main.scss\";\n\nexport default function fortunize(WrappedApp) {\n\n    return class extends React.Component {\n        render() {\n            return (<div className=\"FortunoffApp\">\n                <WrappedApp></WrappedApp>\n            </div>);\n        }\n    }\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// import \"babel-polyfill\";\nimport 'react-app-polyfill/ie11';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/**\n * Common functionality for interface for items referenced from the index,\n *      chiefly, the \"subjects\" and \"interviewers\"\n */\n\nmodule.exports = function(data, indexField) {\n    // let ret = {};\n\n    /**\n     * Data api - designed to replaced in-place with a backend API\n     */\n    const { normalizeString } = require(\"../Common\");\n    const resources = require(\"./resources\");\n\n    let __byID = {}\n\n    const all = () => data;\n\n    all().forEach(r => __byID[r.id] = r);\n\n    const byID = id => __byID[id];\n\n    let filters = {};\n\n    filters.itemContainsAllTerms = function (terms) {\n        terms = terms || [];\n        return function (item) {\n            for (let i = 0; i < terms.length; i++) {\n                let term = terms[i];\n                if (normalizeString(item.label).indexOf(normalizeString(term)) < 0) return false;\n            }\n            return true;\n        }\n    };\n\n    /**\n     * \n     * search - return only subjects that contain all of the strings\n     *          in terms. Comparison is case-insensitive and ignores\n     *          most special characters and diacritics (via unidecode)\n     * \n     * @param {Array<String>} terms \n     */\n    function search (terms) {\n\n        let ret = [];\n        terms = terms || [];\n\n        (resources.query() || []).forEach(r => {\n            r[indexField].forEach(s => {\n                if (!(filters.itemContainsAllTerms(terms)(byID(s)))) { return false }\n                if (ret.indexOf(byID(s)) < 0) ret.push(byID(s))\n            });\n        });\n\n        return ret\n    }\n\n    return {byID, search}\n}","\nimport * as resources from \"./resources\";\nimport * as subjects from \"./subjects\";\nimport * as interviewers from \"./interviewers\";\nimport * as programs from \"./programs\";\nimport { getRecordingYear } from \"./getRecordingYear\";\nimport { getGender } from \"./getGender\";\n\n/**\n * \n * getData - given an options object,\n *           return the counts of specified meta\n *           field values\n * \n */\nfunction getData(options) {\n\n    let ret = {\n        // implemented\n        \"subjects\": {},\n        \"languages\": {},\n        \"birthYears\": {},\n        \"interviewers\": {},\n        \"gender\": {\n            men: { label: \"Men\", count: 0 },\n            women: { label: \"Women\", count: 0 },\n            both: { label: \"Both\", count: 0 }\n        },\n        \"programs\": {},\n\n        // not implemented\n        \"recordingYears\": {},\n        // \"birthCities\": {},\n        // \"birthCountries\": {},\n        \"birthPlaces\": {},\n        \"birthCities\": {},\n        \"birthCountries\": {}\n\n    }\n\n    // let subj = [];\n\n    function incr(retKey, item) {\n        if (!(item.id in ret[retKey])) {\n            ret[retKey][item.id] = { ...item, count: 0 };\n        }\n        ret[retKey][item.id].count += 1;\n    }\n\n    var res = resources.query(options || {});\n\n    function birthPlaces(r) {\n        let ret = []\n        const cityCount = (r.birth_place_cities || []).length;\n        const countryCount = (r.birth_place_countries || []).length;\n        if (cityCount < 1 || cityCount !== countryCount) { return [] }\n        for (var i = 0; i < cityCount; i++) {\n            const city = r.birth_place_cities[i] || \"\",\n                country = r.birth_place_countries[i] || \"\";\n            ret.push(`${city},${country}|${country}`);\n        }\n        return ret;\n    }\n\n    res = res.map(r => { return { ...r, birthPlaces: birthPlaces(r) } });\n\n    res.forEach(r => {\n\n        // count occurrences of each subject\n        r.subject_refs.forEach(s => { incr(\"subjects\", subjects.byID(s)) });\n\n        // count the number of records with both men and women\n        const genderItem = { id: getGender(r).toLowerCase() };\n        // console.log(\"gender\", genderItem)\n        incr(\"gender\", genderItem);\n        // if (r.subject_refs.indexOf(MEN_SUBJECT) >= 0 && r.subject_refs.indexOf(WOMEN_SUBJECT) >= 0){ ret.gender.both.count += 1 }\n\n        // count occurrences of each birth year\n        if (r.birth_years && r.birth_years.length === 1) {\n            incr(\"birthYears\", { label: r.birth_years[0], id: r.birth_years[0] })\n        }\n\n        // count occurrences of each language\n        incr(\"languages\", { label: r.language, id: r.language });\n\n        // // count occurrences of each birth city/country pair\n        r.birthPlaces.forEach(place => {\n            const city = place.split(\"|\")[0],\n                country = place.split(\"|\")[1];\n\n            incr(\"birthPlaces\", {\n                label: place,\n                id: place,\n                city,\n                country\n            });\n            incr(\"birthCities\", {\n                label: city,\n                id: city,\n            });\n            incr(\"birthCountries\", {\n                label: country,\n                id: country,\n            })\n\n        });\n\n\n        // count occurrences of each recording year\n        const ryear = getRecordingYear(r);\n        incr(\"recordingYears\", { label: ryear, id: ryear });\n\n        // count occurrences of each affiliate program\n        (r.programs || []).forEach(i => { incr(\"programs\", programs.byID(i)) });\n\n        // count occurences of each interviewer\n        (r.interviewers || []).forEach(i => { incr(\"interviewers\", interviewers.byID(i)) })\n\n    });\n\n    // ret.gender.men = (ret.subjects[MEN_SUBJECT] || 0) \n    // ret.gender.women = (ret.subjects[WOMEN_SUBJECT] || 0 )\n    // ret.gender.men.count -= ret.gender.both.count || 0 ;\n    // ret.gender.women.count -= ret.gender.both.count;\n\n\n    const returnValue = {\n        resources: res,\n        subjects: undefined,\n        summaryData: ret\n    };\n\n    return returnValue;\n\n}\n\nexport {\n    getData,\n    resources,\n    interviewers,\n    subjects,\n    programs,\n\n    getRecordingYear\n};","const staticStuff = require(\"./static\");\n\nfunction getGender(resource){\n    const men = resource.subject_refs.indexOf(staticStuff.MEN_SUBJECT) >= 0,\n    women = resource.subject_refs.indexOf(staticStuff.WOMEN_SUBJECT) >= 0,\n    both = men && women;\n\n    if (both){ return \"Both\" }\n    else if (women){ return \"Women\" }\n    else if (men){ return \"Men\" }\n    return \"Unknown\"\n\n}\n\nexport { getGender }","/**\n * subjects interface - create an API interface for subjects items\n */\nconst createReferenceInterface = require(\"./createReferenceInterface\");\n\nconst data = require(\"./json/subjects.10.min.json\").map((a) => {\n  const ret = {\n    label: a.title,\n    id: a.uri,\n  };\n  return ret;\n});\n\nmodule.exports = createReferenceInterface(data, \"subject_refs\");\n","const createReferenceInterface = require(\"./createReferenceInterface\");\n\nconst data = require(\"./json/interviewers.7.min.json\")\n    .map(i => {\n\n        if (i.display_names.length > 1){ throw new Error(\"Interviewer with multiple names\")}\n        return {\n            id: i.uri,\n            label: i.display_names[0]\n        }\n\n    })\n\nmodule.exports = createReferenceInterface(data, \"interviewers\" );","const createReferenceInterface = require(\"./createReferenceInterface\");\n\nconst data = require(\"./json/programs.min.json\")\n    .map(i => {\n\n        if (i.display_names.length > 1){ throw new Error(\"Program with multiple names\")}\n        return {\n            id: i.uri,\n            label: i.display_names[0]\n        }\n\n    });\n\n\nmodule.exports = createReferenceInterface(data, \"programs\" );"],"sourceRoot":""}